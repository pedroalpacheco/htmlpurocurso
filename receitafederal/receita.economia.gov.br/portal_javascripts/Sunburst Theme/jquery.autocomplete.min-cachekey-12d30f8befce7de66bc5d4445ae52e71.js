
/* Merged Plone Javascript file
 * This file is dynamically assembled from separate parts.
 * Some of these parts have 3rd party licenses or copyright information attached
 * Such information is valid for that section,
 * not for the entire composite file
 * originating files are separated by - filename.js -
 */

/* - jquery.autocomplete.min.js - */
/*
 * Autocomplete - jQuery plugin 1.0.2
 *
 * Copyright (c) 2007 Dylan Verheul, Dan G. Switzer, Anjesh Tuladhar, JÃ¶rn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id: jquery.autocomplete.js 5747 2008-06-25 18:30:55Z joern.zaefferer $
 *
 */;(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=typeof urlOrData=="string";options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);options.highlight=options.highlight||function(value){return value;};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options);});},result:function(handler){return this.bind("result",handler);},search:function(handler){return this.trigger("search",[handler]);},flushCache:function(){return this.trigger("flushCache");},setOptions:function(options){return this.trigger("setOptions",[options]);},unautocomplete:function(){return this.trigger("unautocomplete");}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var $input=$(input).attr("autocomplete","off").addClass(options.inputClass);var timeout;var previousValue="";var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);var blockSubmit;$.browser.opera&&$(input.form).bind("submit.autocomplete",function(){if(blockSubmit){blockSubmit=false;return false;}});$input.bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(event){lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev();}else{onChange(0,true);}break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next();}else{onChange(0,true);}break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp();}else{onChange(0,true);}break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown();}else{onChange(0,true);}break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:if(selectCurrent()){event.preventDefault();blockSubmit=true;return false;}break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break;}}).focus(function(){hasFocus++;}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults();}}).click(function(){if(hasFocus++>1&&!select.visible()){onChange(0,true);}}).bind("search",function(){var fn=(arguments.length>1)?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break;}}}if(typeof fn=="function")fn(result);else $input.trigger("result",result&&[result.data,result.value]);}$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback);});}).bind("flushCache",function(){cache.flush();}).bind("setOptions",function(){$.extend(options,arguments[1]);if("data"in arguments[1])cache.populate();}).bind("unautocomplete",function(){select.unbind();$input.unbind();$(input.form).unbind(".autocomplete");});function selectCurrent(){var selected=select.selected();if(!selected)return false;var v=selected.result;previousValue=v;if(options.multiple){var words=trimWords($input.val());if(words.length>1){v=words.slice(0,words.length-1).join(options.multipleSeparator)+options.multipleSeparator+v;}v+=options.multipleSeparator;}$input.val(v);hideResultsNow();$input.trigger("result",[selected.data,selected.value]);return true;}function onChange(crap,skipPrevCheck){if(lastKeyPressCode==KEY.DEL){select.hide();return;}var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue)return;previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase)currentValue=currentValue.toLowerCase();request(currentValue,receiveData,hideResultsNow);}else{stopLoading();select.hide();}};function trimWords(value){if(!value){return[""];}var words=value.split(options.multipleSeparator);var result=[];$.each(words,function(i,value){if($.trim(value))result[i]=$.trim(value);});return result;}function lastWord(value){if(!options.multiple)return value;var words=trimWords(value);return words[words.length-1];}function autoFill(q,sValue){if(options.autoFill&&(lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=KEY.BACKSPACE){$input.val($input.val()+sValue.substring(lastWord(previousValue).length));$.Autocompleter.Selection(input,previousValue.length,previousValue.length+sValue.length);}};function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200);};function hideResultsNow(){var wasVisible=select.visible();select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){$input.search(function(result){if(!result){if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""));}else
$input.val("");}});}if(wasVisible)$.Autocompleter.Selection(input,input.value.length,input.value.length);};function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show();}else{hideResultsNow();}};function request(term,success,failure){if(!options.matchCase)term=term.toLowerCase();var data=cache.load(term);if(data&&data.length){success(term,data);}else if((typeof options.url=="string")&&(options.url.length>0)){var extraParams={timestamp:+new Date()};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param;});$.ajax({mode:"abort",port:"autocomplete"+input.name,dataType:options.dataType,url:options.url,data:$.extend({q:lastWord(term),limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||parse(data);cache.add(term,parsed);success(term,parsed);}});}else{select.emptyList();failure(term);}};function parse(data){var parsed=[];var rows=data.split("\n");for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}return parsed;};function stopLoading(){$input.removeClass(options.loadingClass);};};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase)s=s.toLowerCase();var i=s.indexOf(sub);if(i==-1)return false;return i==0||options.matchContains;};function add(q,value){if(length>options.cacheLength){flush();}if(!data[q]){length++;}data[q]=value;}function populate(){if(!options.data)return false;var stMatchSets={},nullData=0;if(!options.url)options.cacheLength=1;stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=(typeof rawValue=="string")?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(value===false)continue;var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar])stMatchSets[firstChar]=[];var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row);}};$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value);});}setTimeout(populate,25);function flush(){data={};length=0;}return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length)return null;if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x);}});}}return csub;}else
if(data[q]){return data[q];}else
if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}return null;}};};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:"ac_over"};var listItems,active=-1,data,term="",needsInit=true,element,list;function init(){if(!needsInit)return;element=$("<div/>").hide().addClass(options.resultsClass).css("position","absolute").appendTo(document.body);list=$("<ul/>").appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=='LI'){active=$("li",list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE);}}).click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();input.focus();return false;}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0)element.css("width",options.width);needsInit=false;}function target(event){var element=event.target;while(element&&element.tagName!="LI")element=element.parentNode;if(!element)return[];return element;}function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES.ACTIVE);movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight;});if((offset+activeItem[0].offsetHeight-list.scrollTop())>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight());}else if(offset<list.scrollTop()){list.scrollTop(offset);}}};function movePosition(step){active+=step;if(active<0){active=listItems.size()-1;}else if(active>=listItems.size()){active=0;}}function limitNumberOfItems(available){return options.max&&options.max<available?options.max:available;}function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i])continue;var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(formatted===false)continue;var li=$("<li/>").html(options.highlight(formatted,term)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(list)[0];$.data(li,"ac_data",data[i]);}listItems=list.find("li");if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0;}if($.fn.bgiframe)list.bgiframe();}return{display:function(d,q){init();data=d;term=q;fillList();},next:function(){moveSelect(1);},prev:function(){moveSelect(-1);},pageUp:function(){if(active!=0&&active-8<0){moveSelect(-active);}else{moveSelect(-8);}},pageDown:function(){if(active!=listItems.size()-1&&active+8>listItems.size()){moveSelect(listItems.size()-1-active);}else{moveSelect(8);}},hide:function(){element&&element.hide();listItems&&listItems.removeClass(CLASSES.ACTIVE);active=-1;},visible:function(){return element&&element.is(":visible");},current:function(){return this.visible()&&(listItems.filter("."+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0]);},show:function(){var offset=$(input).offset();element.css({width:typeof options.width=="string"||options.width>0?options.width:$(input).width(),top:offset.top+input.offsetHeight,left:offset.left}).show();if(options.scroll){list.scrollTop(0);list.css({maxHeight:options.scrollHeight,overflow:'auto'});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;list.css('height',scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")));}}}},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],"ac_data");},emptyList:function(){list&&list.empty();},unbind:function(){element&&element.remove();}};};$.Autocompleter.Selection=function(field,start,end){if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select();}else if(field.setSelectionRange){field.setSelectionRange(start,end);}else{if(field.selectionStart){field.selectionStart=start;field.selectionEnd=end;}}field.focus();};})(jQuery);

/* - ++resource++sc.embedder/video-js/video.js - */
// http://receita.economia.gov.br/portal_javascripts/++resource++sc.embedder/video-js/video.js?original=1
;(function(window,undefined){var document=window.document;document.createElement("video");document.createElement("audio");var VideoJS=function(id,addOptions,ready){var tag;if(typeof id=="string"){if(id.indexOf("#")===0){id=id.slice(1)}
if(_V_.players[id]){return _V_.players[id]} else{tag=_V_.el(id)}} else{tag=id}
if(!tag||!tag.nodeName){throw new TypeError("The element or ID supplied is not valid. (VideoJS)")}
return tag.player||new _V_.Player(tag,addOptions,ready)},_V_=VideoJS,CDN_VERSION="3.2";VideoJS.players={};VideoJS.options={techOrder:["html5","flash"],html5:{},flash:{swf:"http://vjs.zencdn.net/c/video-js.swf"},width:"auto",height:"auto",defaultVolume:0.00,components:{"posterImage":{},"textTrackDisplay":{},"loadingSpinner":{},"bigPlayButton":{},"controlBar":{}}};if(CDN_VERSION!="GENERATED_CDN_VSN"){_V_.options.flash.swf="http://vjs.zencdn.net/"+CDN_VERSION+"/video-js.swf"}_V_.merge=function(obj1,obj2,safe){if(!obj2){obj2={}};for(var attrname in obj2){if(obj2.hasOwnProperty(attrname)&&(!safe||!obj1.hasOwnProperty(attrname))){obj1[attrname]=obj2[attrname]}}
return obj1};_V_.extend=function(obj){this.merge(this,obj,true)};_V_.extend({tech:{},controlSets:{},isIE: function(){return!+"\v1"},isFF: function(){return!!_V_.ua.match("Firefox")},isIPad: function(){return navigator.userAgent.match(/iPad/i)!==null},isIPhone: function(){return navigator.userAgent.match(/iPhone/i)!==null},isIOS: function(){return VideoJS.isIPhone()||VideoJS.isIPad()},iOSVersion: function(){var match=navigator.userAgent.match(/OS (\d+)_/i);if(match&&match[1]){return match[1]}},isAndroid: function(){return navigator.userAgent.match(/Android.*AppleWebKit/i)!==null},androidVersion: function(){var match=navigator.userAgent.match(/Android (\d+)\./i);if(match&&match[1]){return match[1]}},testVid:document.createElement("video"),ua:navigator.userAgent,support:{},each: function(arr,fn){if(!arr||arr.length===0){return}
for(var i=0,j=arr.length;i<j;i++){fn.call(this,arr[i],i)}},eachProp: function(obj,fn){if(!obj){return}
for(var name in obj){if(obj.hasOwnProperty(name)){fn.call(this,name,obj[name])}}},el: function(id){return document.getElementById(id)},createElement: function(tagName,attributes){var el=document.createElement(tagName),attrname;for(attrname in attributes){if(attributes.hasOwnProperty(attrname)){if(attrname.indexOf("-")!==-1){el.setAttribute(attrname,attributes[attrname])} else{el[attrname]=attributes[attrname]}}}
return el},insertFirst: function(node,parent){if(parent.firstChild){parent.insertBefore(node,parent.firstChild)} else{parent.appendChild(node)}},addClass: function(element,classToAdd){if((" "+element.className+" ").indexOf(" "+classToAdd+" ")==-1){element.className=element.className===""?classToAdd:element.className+" "+classToAdd}},removeClass: function(element,classToRemove){if(element.className.indexOf(classToRemove)==-1){return}
var classNames=element.className.split(" ");classNames.splice(classNames.indexOf(classToRemove),1);element.className=classNames.join(" ")},remove: function(item,array){if(!array) return;var i=array.indexOf(item);if(i!=-1){return array.splice(i,1)}},blockTextSelection: function(){document.body.focus();document.onselectstart=function(){return false}},unblockTextSelection: function(){document.onselectstart=function(){return true}},formatTime: function(seconds,guide){guide=guide||seconds;var s=Math.floor(seconds%60),m=Math.floor(seconds/60%60),h=Math.floor(seconds/3600),gm=Math.floor(guide/60%60),gh=Math.floor(guide/3600);h=(h>0||gh>0)?h+":":"";m=(((h||gm>=10)&&m<10)?"0"+m:m)+":";s=(s<10)?"0"+s:s;return h+m+s},uc: function(string){return string.charAt(0).toUpperCase()+string.slice(1)},getRelativePosition: function(x,relativeElement){return Math.max(0,Math.min(1,(x-_V_.findPosX(relativeElement))/relativeElement.offsetWidth))},getComputedStyleValue: function(element,style){return window.getComputedStyle(element,null).getPropertyValue(style)},trim: function(string){return string.toString().replace(/^\s+/, "").replace(/\s+$/,"")},round: function(num,dec){if(!dec){dec=0}
return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec)},isEmpty: function(object){for(var prop in object){return false}
return true},createTimeRange: function(start,end){return{length:1,start: function(){return start},end: function(){return end}}},cache:{},guid:1,expando:"vdata"+(new Date).getTime(),getData: function(elem){var id=elem[_V_.expando];if(!id){id=elem[_V_.expando]=_V_.guid++;_V_.cache[id]={}}
return _V_.cache[id]},removeData: function(elem){var id=elem[_V_.expando];if(!id){return}
delete _V_.cache[id];try{delete elem[_V_.expando]} catch(e){if(elem.removeAttribute){elem.removeAttribute(_V_.expando)} else{elem[_V_.expando]=null}}},proxy: function(context,fn,uid){if(!fn.guid){fn.guid=_V_.guid++}
var ret=function(){return fn.apply(context,arguments)}
ret.guid=(uid)?uid+"_"+fn.guid:fn.guid;return ret},get: function(url,onSuccess,onError){var local=(url.indexOf("file:")==0||(window.location.href.indexOf("file:")==0&&url.indexOf("http:")==-1));if(typeof XMLHttpRequest=="undefined"){XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")} catch(e){}
try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")} catch(f){}
try{return new ActiveXObject("Msxml2.XMLHTTP")} catch(g){}
throw new Error("This browser does not support XMLHttpRequest.")}}
var request=new XMLHttpRequest();try{request.open("GET",url)} catch(e){_V_.log("VideoJS XMLHttpRequest (open)",e);return false}
request.onreadystatechange=_V_.proxy(this, function(){if(request.readyState==4){if(request.status==200||local&&request.status==0){onSuccess(request.responseText)} else{if(onError){onError()}}}});try{request.send()} catch(e){_V_.log("VideoJS XMLHttpRequest (send)",e);if(onError){onError(e)}}},setLocalStorage: function(key,value){var localStorage=window.localStorage||false;if(!localStorage){return}
try{localStorage[key]=value} catch(e){if(e.code==22||e.code==1014){_V_.log("LocalStorage Full (VideoJS)",e)} else{_V_.log("LocalStorage Error (VideoJS)",e)}}},getAbsoluteURL: function(url){if(!url.match(/^https?:\/\//)){url=_V_.createElement('div',{innerHTML:'<a href="'+url+'">x</a>'}).firstChild.href}
return url}});_V_.log=function(){_V_.log.history=_V_.log.history||[];_V_.log.history.push(arguments);if(window.console){arguments.callee=arguments.callee.caller;var newarr=[].slice.call(arguments);(typeof console.log==='object'?_V_.log.apply.call(console.log,console,newarr):console.log.apply(console,newarr))}};(function(b){function c(){}for(var d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),a;a=d.pop();){b[a]=b[a]||c}})((function(){try{console.log();return window.console}catch(err){return window.console={}}})());if("getBoundingClientRect" in document.documentElement){_V_.findPosX=function(el){var box;try{box=el.getBoundingClientRect()} catch(e){}
if(!box){return 0}
var docEl=document.documentElement,body=document.body,clientLeft=docEl.clientLeft||body.clientLeft||0,scrollLeft=window.pageXOffset||body.scrollLeft,left=box.left+scrollLeft-clientLeft;return left}} else{_V_.findPosX=function(el){var curleft=el.offsetLeft;while(el=obj.offsetParent){if(el.className.indexOf("video-js")==-1){} else{}
curleft+=el.offsetLeft}
return curleft}}(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;_V_.Class=function(){};_V_.Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret}})(name,prop[name]):prop[name]}
function Class(){if(!initializing&&this.init){return this.init.apply(this,arguments)} else if(!initializing){return arguments.callee.prototype.init()}}
Class.prototype=prototype;Class.constructor=Class;Class.extend=arguments.callee;return Class}})();_V_.Component=_V_.Class.extend({init: function(player,options){this.player=player;options=this.options=_V_.merge(this.options||{},options);if(options.el){this.el=options.el} else{this.el=this.createElement()}
this.initComponents()},destroy: function(){},createElement: function(type,attrs){return _V_.createElement(type||"div",attrs)},buildCSSClass: function(){return ""},initComponents: function(){var options=this.options;if(options&&options.components){this.eachProp(options.components, function(name,opts){var tempAdd=this.proxy(function(){this[name]=this.addComponent(name,opts)});if(opts.loadEvent){this.one(opts.loadEvent,tempAdd)} else{tempAdd()}})}},addComponent: function(name,options){var component,componentClass;if(typeof name=="string"){options=options||{};componentClass=options.componentClass||_V_.uc(name);component=new _V_[componentClass](this.player||this,options)} else{component=name}
this.el.appendChild(component.el);return component},removeComponent: function(component){this.el.removeChild(component.el)},show: function(){this.el.style.display="block"},hide: function(){this.el.style.display="none"},fadeIn: function(){this.removeClass("vjs-fade-out");this.addClass("vjs-fade-in")},fadeOut: function(){this.removeClass("vjs-fade-in");this.addClass("vjs-fade-out")},lockShowing: function(){var style=this.el.style;style.display="block";style.opacity=1;style.visiblity="visible"},unlockShowing: function(){var style=this.el.style;style.display="";style.opacity="";style.visiblity=""},addClass: function(classToAdd){_V_.addClass(this.el,classToAdd)},removeClass: function(classToRemove){_V_.removeClass(this.el,classToRemove)},addEvent: function(type,fn,uid){return _V_.addEvent(this.el,type,_V_.proxy(this,fn))},removeEvent: function(type,fn){return _V_.removeEvent(this.el,type,fn)},triggerEvent: function(type,e){return _V_.triggerEvent(this.el,type,e)},one: function(type,fn){_V_.one(this.el,type,_V_.proxy(this,fn))},ready: function(fn){if(!fn) return this;if(this.isReady){fn.call(this)} else{if(this.readyQueue===undefined){this.readyQueue=[]}
this.readyQueue.push(fn)}
return this},triggerReady: function(){this.isReady=true;if(this.readyQueue&&this.readyQueue.length>0){this.each(this.readyQueue, function(fn){fn.call(this)});this.readyQueue=[];this.triggerEvent("ready")}},each: function(arr,fn){_V_.each.call(this,arr,fn)},eachProp: function(obj,fn){_V_.eachProp.call(this,obj,fn)},extend: function(obj){_V_.merge(this,obj)},proxy: function(fn,uid){return _V_.proxy(this,fn,uid)}});_V_.Control=_V_.Component.extend({buildCSSClass: function(){return "vjs-control "+this._super()}});_V_.ControlBar=_V_.Component.extend({options:{loadEvent:"play",components:{"playToggle":{},"fullscreenToggle":{},"currentTimeDisplay":{},"timeDivider":{},"durationDisplay":{},"remainingTimeDisplay":{},"progressControl":{},"volumeControl":{},"muteToggle":{}}},init: function(player,options){this._super(player,options);player.addEvent("play",this.proxy(function(){this.fadeIn();this.player.addEvent("mouseover",this.proxy(this.fadeIn));this.player.addEvent("mouseout",this.proxy(this.fadeOut))}))},createElement: function(){return _V_.createElement("div",{className:"vjs-controls"})},fadeIn: function(){this._super();this.player.triggerEvent("controlsvisible")},fadeOut: function(){this._super();this.player.triggerEvent("controlshidden")},lockShowing: function(){this.el.style.opacity="1"}});_V_.Button=_V_.Control.extend({init: function(player,options){this._super(player,options);this.addEvent("click",this.onClick);this.addEvent("focus",this.onFocus);this.addEvent("blur",this.onBlur)},createElement: function(type,attrs){attrs=_V_.merge({className:this.buildCSSClass(),innerHTML:'<div><span class="vjs-control-text">'+(this.buttonText||"Need Text")+'</span></div>',role:"button",tabIndex:0},attrs);return this._super(type,attrs)},onClick: function(){},onFocus: function(){_V_.addEvent(document,"keyup",_V_.proxy(this,this.onKeyPress))},onKeyPress: function(event){if(event.which==32||event.which==13){event.preventDefault();this.onClick()}},onBlur: function(){_V_.removeEvent(document,"keyup",_V_.proxy(this,this.onKeyPress))}});_V_.PlayButton=_V_.Button.extend({buttonText:"Play",buildCSSClass: function(){return "vjs-play-button "+this._super()},onClick: function(){this.player.play()}});_V_.PauseButton=_V_.Button.extend({buttonText:"Pause",buildCSSClass: function(){return "vjs-pause-button "+this._super()},onClick: function(){this.player.pause()}});_V_.PlayToggle=_V_.Button.extend({buttonText:"Play",init: function(player,options){this._super(player,options);player.addEvent("play",_V_.proxy(this,this.onPlay));player.addEvent("pause",_V_.proxy(this,this.onPause))},buildCSSClass: function(){return "vjs-play-control "+this._super()},onClick: function(){if(this.player.paused()){this.player.play()} else{this.player.pause()}},onPlay: function(){_V_.removeClass(this.el,"vjs-paused");_V_.addClass(this.el,"vjs-playing")},onPause: function(){_V_.removeClass(this.el,"vjs-playing");_V_.addClass(this.el,"vjs-paused")}});_V_.FullscreenToggle=_V_.Button.extend({buttonText:"Fullscreen",buildCSSClass: function(){return "vjs-fullscreen-control "+this._super()},onClick: function(){if(!this.player.isFullScreen){this.player.requestFullScreen()} else{this.player.cancelFullScreen()}}});_V_.BigPlayButton=_V_.Button.extend({init: function(player,options){this._super(player,options);player.addEvent("play",_V_.proxy(this,this.hide));player.addEvent("ended",_V_.proxy(this,this.show))},createElement: function(){return this._super("div",{className:"vjs-big-play-button",innerHTML:"<span></span>"})},onClick: function(){if(this.player.currentTime()){this.player.currentTime(0)}
this.player.play()}});_V_.LoadingSpinner=_V_.Component.extend({init: function(player,options){this._super(player,options);player.addEvent("canplay",_V_.proxy(this,this.hide));player.addEvent("canplaythrough",_V_.proxy(this,this.hide));player.addEvent("playing",_V_.proxy(this,this.hide));player.addEvent("seeking",_V_.proxy(this,this.show));player.addEvent("error",_V_.proxy(this,this.show));player.addEvent("waiting",_V_.proxy(this,this.show))},createElement: function(){var classNameSpinner,innerHtmlSpinner;if(typeof this.player.el.style.WebkitBorderRadius=="string"||typeof this.player.el.style.MozBorderRadius=="string"||typeof this.player.el.style.KhtmlBorderRadius=="string"||typeof this.player.el.style.borderRadius=="string"){classNameSpinner="vjs-loading-spinner";innerHtmlSpinner="<div class='ball1'></div><div class='ball2'></div><div class='ball3'></div><div class='ball4'></div><div class='ball5'></div><div class='ball6'></div><div class='ball7'></div><div class='ball8'></div>"} else{classNameSpinner="vjs-loading-spinner-fallback";innerHtmlSpinner=""}
return this._super("div",{className:classNameSpinner,innerHTML:innerHtmlSpinner})}});_V_.CurrentTimeDisplay=_V_.Component.extend({init: function(player,options){this._super(player,options);player.addEvent("timeupdate",_V_.proxy(this,this.updateContent))},createElement: function(){var el=this._super("div",{className:"vjs-current-time vjs-time-controls vjs-control"});this.content=_V_.createElement("div",{className:"vjs-current-time-display",innerHTML:'0:00'});el.appendChild(_V_.createElement("div").appendChild(this.content));return el},updateContent: function(){var time=(this.player.scrubbing)?this.player.values.currentTime:this.player.currentTime();this.content.innerHTML=_V_.formatTime(time,this.player.duration())}});_V_.DurationDisplay=_V_.Component.extend({init: function(player,options){this._super(player,options);player.addEvent("timeupdate",_V_.proxy(this,this.updateContent))},createElement: function(){var el=this._super("div",{className:"vjs-duration vjs-time-controls vjs-control"});this.content=_V_.createElement("div",{className:"vjs-duration-display",innerHTML:'0:00'});el.appendChild(_V_.createElement("div").appendChild(this.content));return el},updateContent: function(){if(this.player.duration()){this.content.innerHTML=_V_.formatTime(this.player.duration())}}});_V_.TimeDivider=_V_.Component.extend({createElement: function(){return this._super("div",{className:"vjs-time-divider",innerHTML:'<div><span>/</span></div>'})}});_V_.RemainingTimeDisplay=_V_.Component.extend({init: function(player,options){this._super(player,options);player.addEvent("timeupdate",_V_.proxy(this,this.updateContent))},createElement: function(){var el=this._super("div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});this.content=_V_.createElement("div",{className:"vjs-remaining-time-display",innerHTML:'-0:00'});el.appendChild(_V_.createElement("div").appendChild(this.content));return el},updateContent: function(){if(this.player.duration()){this.content.innerHTML="-"+_V_.formatTime(this.player.remainingTime())}}});_V_.Slider=_V_.Component.extend({init: function(player,options){this._super(player,options);player.addEvent(this.playerEvent,_V_.proxy(this,this.update));this.addEvent("mousedown",this.onMouseDown);this.addEvent("focus",this.onFocus);this.addEvent("blur",this.onBlur);this.player.addEvent("controlsvisible",this.proxy(this.update));this.update()},createElement: function(type,attrs){attrs=_V_.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},attrs);return this._super(type,attrs)},onMouseDown: function(event){event.preventDefault();_V_.blockTextSelection();_V_.addEvent(document,"mousemove",_V_.proxy(this,this.onMouseMove));_V_.addEvent(document,"mouseup",_V_.proxy(this,this.onMouseUp));this.onMouseMove(event)},onMouseUp: function(event){_V_.unblockTextSelection();_V_.removeEvent(document,"mousemove",this.onMouseMove,false);_V_.removeEvent(document,"mouseup",this.onMouseUp,false);this.update()},update: function(){var barProgress,progress=this.getPercent();handle=this.handle,bar=this.bar;if(isNaN(progress)){progress=0}
barProgress=progress;if(handle){var box=this.el,boxWidth=box.offsetWidth,handleWidth=handle.el.offsetWidth,handlePercent=(handleWidth)?handleWidth/boxWidth:0,boxAdjustedPercent=1-handlePercent;adjustedProgress=progress * boxAdjustedPercent,barProgress=adjustedProgress+(handlePercent/2);handle.el.style.left=_V_.round(adjustedProgress * 100,2)+"%"}
bar.el.style.width=_V_.round(barProgress * 100,2)+"%"},calculateDistance: function(event){var box=this.el,boxX=_V_.findPosX(box),boxW=box.offsetWidth,handle=this.handle;if(handle){var handleW=handle.el.offsetWidth;boxX=boxX+(handleW/2);boxW=boxW-handleW}
return Math.max(0,Math.min(1,(event.pageX-boxX)/boxW))},onFocus: function(event){_V_.addEvent(document,"keyup",_V_.proxy(this,this.onKeyPress))},onKeyPress: function(event){if(event.which==37){event.preventDefault();this.stepBack()} else if(event.which==39){event.preventDefault();this.stepForward()}},onBlur: function(event){_V_.removeEvent(document,"keyup",_V_.proxy(this,this.onKeyPress))}});_V_.ProgressControl=_V_.Component.extend({options:{components:{"seekBar":{}}},createElement: function(){return this._super("div",{className:"vjs-progress-control vjs-control"})}});_V_.SeekBar=_V_.Slider.extend({options:{components:{"loadProgressBar":{},"bar":{componentClass:"PlayProgressBar"},"handle":{componentClass:"SeekHandle"}}},playerEvent:"timeupdate",init: function(player,options){this._super(player,options)},createElement: function(){return this._super("div",{className:"vjs-progress-holder"})},getPercent: function(){return this.player.currentTime()/this.player.duration()},onMouseDown: function(event){this._super(event);this.player.scrubbing=true;this.videoWasPlaying=!this.player.paused();this.player.pause()},onMouseMove: function(event){var newTime=this.calculateDistance(event) * this.player.duration();if(newTime==this.player.duration()){newTime=newTime-0.1}
this.player.currentTime(newTime)},onMouseUp: function(event){this._super(event);this.player.scrubbing=false;if(this.videoWasPlaying){this.player.play()}},stepForward: function(){this.player.currentTime(this.player.currentTime()+1)},stepBack: function(){this.player.currentTime(this.player.currentTime()-1)}});_V_.LoadProgressBar=_V_.Component.extend({init: function(player,options){this._super(player,options);player.addEvent("progress",_V_.proxy(this,this.update))},createElement: function(){return this._super("div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})},update: function(){if(this.el.style){this.el.style.width=_V_.round(this.player.bufferedPercent() * 100,2)+"%"}}});_V_.PlayProgressBar=_V_.Component.extend({createElement: function(){return this._super("div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})}});_V_.SeekHandle=_V_.Component.extend({createElement: function(){return this._super("div",{className:"vjs-seek-handle",innerHTML:'<span class="vjs-control-text">00:00</span>'})}});_V_.VolumeControl=_V_.Component.extend({options:{components:{"volumeBar":{}}},createElement: function(){return this._super("div",{className:"vjs-volume-control vjs-control"})}});_V_.VolumeBar=_V_.Slider.extend({options:{components:{"bar":{componentClass:"VolumeLevel"},"handle":{componentClass:"VolumeHandle"}}},playerEvent:"volumechange",createElement: function(){return this._super("div",{className:"vjs-volume-bar"})},onMouseMove: function(event){this.player.volume(this.calculateDistance(event))},getPercent: function(){return this.player.volume()},stepForward: function(){this.player.volume(this.player.volume()+0.1)},stepBack: function(){this.player.volume(this.player.volume()-0.1)}});_V_.VolumeLevel=_V_.Component.extend({createElement: function(){return this._super("div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})}});_V_.VolumeHandle=_V_.Component.extend({createElement: function(){return this._super("div",{className:"vjs-volume-handle",innerHTML:'<span class="vjs-control-text"></span>'})}});_V_.MuteToggle=_V_.Button.extend({init: function(player,options){this._super(player,options);player.addEvent("volumechange",_V_.proxy(this,this.update))},createElement: function(){return this._super("div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},onClick: function(event){this.player.muted(this.player.muted()?false:true)},update: function(event){var vol=this.player.volume(),level=3;if(vol==0||this.player.muted()){level=0} else if(vol<0.33){level=1} else if(vol<0.67){level=2}
_V_.each.call(this,[0,1,2,3], function(i){_V_.removeClass(this.el,"vjs-vol-"+i)});_V_.addClass(this.el,"vjs-vol-"+level)}});_V_.PosterImage=_V_.Button.extend({init: function(player,options){this._super(player,options);if(!this.player.options.poster){this.hide()}
player.addEvent("play",_V_.proxy(this,this.hide))},createElement: function(){return _V_.createElement("img",{className:"vjs-poster",src:this.player.options.poster,tabIndex:-1})},onClick: function(){this.player.play()}});_V_.Menu=_V_.Component.extend({init: function(player,options){this._super(player,options)},addItem: function(component){this.addComponent(component);component.addEvent("click",this.proxy(function(){this.unlockShowing()}))},createElement: function(){return this._super("ul",{className:"vjs-menu"})}});_V_.MenuItem=_V_.Button.extend({init: function(player,options){this._super(player,options);if(options.selected){this.addClass("vjs-selected")}},createElement: function(type,attrs){return this._super("li",_V_.merge({className:"vjs-menu-item",innerHTML:this.options.label},attrs))},onClick: function(){this.selected(true)},selected: function(selected){if(selected){this.addClass("vjs-selected")} else{this.removeClass("vjs-selected")}}});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){"use strict";if(this===void 0||this===null){throw new TypeError()}
var t=Object(this);var len=t.length>>>0;if(len===0){return-1}
var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!==n){n=0} else if(n!==0&&n!==(1/ 0) && n !== -(1 / 0)){n=(n>0||-1) * Math.floor(Math.abs(n))}}
if(n>=len){return-1}
var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k}}
return-1}}
_V_.extend({addEvent: function(elem,type,fn){var data=_V_.getData(elem),handlers;if(data&&!data.handler){data.handler=function(event){event=_V_.fixEvent(event);var handlers=_V_.getData(elem).events[event.type];if(handlers){var handlersCopy=[];_V_.each(handlers, function(handler,i){handlersCopy[i]=handler})
for(var i=0,l=handlersCopy.length;i<l;i++){handlersCopy[i].call(elem,event)}}}}
if(!data.events){data.events={}}
handlers=data.events[type];if(!handlers){handlers=data.events[type]=[];if(document.addEventListener){elem.addEventListener(type,data.handler,false)} else if(document.attachEvent){elem.attachEvent("on"+type,data.handler)}}
if(!fn.guid){fn.guid=_V_.guid++}
handlers.push(fn)},removeEvent: function(elem,type,fn){var data=_V_.getData(elem),handlers;if(!data.events){return}
if(!type){for(type in data.events){_V_.cleanUpEvents(elem,type)}
return}
handlers=data.events[type];if(!handlers){return}
if(fn&&fn.guid){for(var i=0;i<handlers.length;i++){if(handlers[i].guid===fn.guid){handlers.splice(i--,1)}}}
_V_.cleanUpEvents(elem,type)},cleanUpEvents: function(elem,type){var data=_V_.getData(elem);if(data.events[type].length===0){delete data.events[type];if(document.removeEventListener){elem.removeEventListener(type,data.handler,false)} else if(document.detachEvent){elem.detachEvent("on"+type,data.handler)}}
if(_V_.isEmpty(data.events)){delete data.events;delete data.handler}
if(_V_.isEmpty(data)){_V_.removeData(elem)}},fixEvent: function(event){if(event[_V_.expando]){return event}
var originalEvent=event;event=new _V_.Event(originalEvent);for(var i=_V_.Event.props.length,prop;i;){prop=_V_.Event.props[--i];event[prop]=originalEvent[prop]}
if(!event.target){event.target=event.srcElement||document}
if(event.target.nodeType===3){event.target=event.target.parentNode}
if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement}
if(event.pageX==null&&event.clientX!=null){var eventDocument=event.target.ownerDocument||document,doc=eventDocument.documentElement,body=eventDocument.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}
if(event.which==null&&(event.charCode!=null||event.keyCode!=null)){event.which=event.charCode!=null?event.charCode:event.keyCode}
if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey}
if(!event.which&&event.button!==undefined){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)))}
return event},triggerEvent: function(elem,event){var data=_V_.getData(elem),parent=elem.parentNode||elem.ownerDocument,type=event.type||event,handler;if(data){handler=data.handler}
event=typeof event==="object"?event[_V_.expando]?event:new _V_.Event(type,event):new _V_.Event(type);event.type=type;if(handler){handler.call(elem,event)}
event.result=undefined;event.target=elem},one: function(elem,type,fn){_V_.addEvent(elem,type, function(){_V_.removeEvent(elem,type,arguments.callee)
fn.apply(this,arguments)})}});_V_.Event=function(src,props){if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse} else{this.type=src}
if(props){_V_.merge(this,props)}
this.timeStamp=(new Date).getTime();this[_V_.expando]=true};_V_.Event.prototype={preventDefault: function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return}
if(e.preventDefault){e.preventDefault()} else{e.returnValue=false}},stopPropagation: function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return}
if(e.stopPropagation){e.stopPropagation()}
e.cancelBubble=true},stopImmediatePropagation: function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};_V_.Event.props="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");
function returnTrue(){return true}
function returnFalse(){return false}
var JSON;if(!JSON){JSON={}}(function(){var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v} else{delete value[k]}}}}
return reviver.call(holder,key,value)}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx, function(a){return '\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4)})}
if (/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j}
throw new SyntaxError('JSON.parse')}}}());_V_.Player=_V_.Component.extend({init: function(tag,addOptions,ready){this.tag=tag;var el=this.el=_V_.createElement("div"),options=this.options={},width=options.width=tag.getAttribute('width'),height=options.height=tag.getAttribute('height'),initWidth=width||300,initHeight=height||150;tag.player=el.player=this;this.ready(ready);tag.parentNode.insertBefore(el,tag);el.appendChild(tag);el.id=this.id=tag.id;el.className=tag.className;tag.id+="_html5_api";tag.className="vjs-tech";_V_.players[el.id]=this;el.setAttribute("width",initWidth);el.setAttribute("height",initHeight);el.style.width=initWidth+"px";el.style.height=initHeight+"px";tag.removeAttribute("width");tag.removeAttribute("height");_V_.merge(options,_V_.options);_V_.merge(options,this.getVideoTagSettings());_V_.merge(options,addOptions);tag.removeAttribute("controls");tag.removeAttribute("poster");if(tag.hasChildNodes()){for(var i=0,j=tag.childNodes;i<j.length;i++){if(j[i].nodeName=="SOURCE"||j[i].nodeName=="TRACK"){tag.removeChild(j[i])}}}
this.values={};this.addClass("vjs-paused");this.addEvent("ended",this.onEnded);this.addEvent("play",this.onPlay);this.addEvent("pause",this.onPause);this.addEvent("progress",this.onProgress);this.addEvent("error",this.onError);if(options.controls){this.ready(function(){this.initComponents()})}
this.textTracks=[];if(options.tracks&&options.tracks.length>0){this.addTextTracks(options.tracks)}
if(!options.sources||options.sources.length==0){for(var i=0,j=options.techOrder;i<j.length;i++){var techName=j[i],tech=_V_[techName];if(tech.isSupported()){this.loadTech(techName);break}}} else{this.src(options.sources)}},values:{},destroy: function(){this.stopTrackingProgress();this.stopTrackingCurrentTime();_V_.players[this.id]=null;delete _V_.players[this.id];this.tech.destroy();this.el.parentNode.removeChild(this.el)},createElement: function(type,options){},getVideoTagSettings: function(){var options={sources:[],tracks:[]};options.src=this.tag.getAttribute("src");options.controls=this.tag.getAttribute("controls")!==null;options.poster=this.tag.getAttribute("poster");options.preload=this.tag.getAttribute("preload");options.autoplay=this.tag.getAttribute("autoplay")!==null;options.loop=this.tag.getAttribute("loop")!==null;options.muted=this.tag.getAttribute("muted")!==null;if(this.tag.hasChildNodes()){for(var c,i=0,j=this.tag.childNodes;i<j.length;i++){c=j[i];if(c.nodeName=="SOURCE"){options.sources.push({src:c.getAttribute('src'),type:c.getAttribute('type'),media:c.getAttribute('media'),title:c.getAttribute('title')})}
if(c.nodeName=="TRACK"){options.tracks.push({src:c.getAttribute("src"),kind:c.getAttribute("kind"),srclang:c.getAttribute("srclang"),label:c.getAttribute("label"),'default':c.getAttribute("default")!==null,title:c.getAttribute("title")})}}}
return options},loadTech: function(techName,source){if(this.tech){this.unloadTech()} else if(techName!="html5"&&this.tag){this.el.removeChild(this.tag);this.tag=false}
this.techName=techName;this.isReady=false;var techReady=function(){this.player.triggerReady();if(!this.support.progressEvent){this.player.manualProgressOn()}
if(!this.support.timeupdateEvent){this.player.manualTimeUpdatesOn()}}
var techOptions=_V_.merge({source:source,parentEl:this.el},this.options[techName])
if(source){if(source.src==this.values.src&&this.values.currentTime>0){techOptions.startTime=this.values.currentTime}
this.values.src=source.src}
this.tech=new _V_[techName](this,techOptions);this.tech.ready(techReady)},unloadTech: function(){this.tech.destroy();if(this.manualProgress){this.manualProgressOff()}
if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}
this.tech=false},manualProgressOn: function(){this.manualProgress=true;this.trackProgress();this.tech.addEvent("progress", function(){this.removeEvent("progress",arguments.callee);this.support.progressEvent=true;this.player.manualProgressOff()})},manualProgressOff: function(){this.manualProgress=false;this.stopTrackingProgress()},trackProgress: function(){this.progressInterval=setInterval(_V_.proxy(this, function(){if(this.values.bufferEnd<this.buffered().end(0)){this.triggerEvent("progress")} else if(this.bufferedPercent()==1){this.stopTrackingProgress();this.triggerEvent("progress")}}),500)},stopTrackingProgress: function(){clearInterval(this.progressInterval)},manualTimeUpdatesOn: function(){this.manualTimeUpdates=true;this.addEvent("play",this.trackCurrentTime);this.addEvent("pause",this.stopTrackingCurrentTime);this.tech.addEvent("timeupdate", function(){this.removeEvent("timeupdate",arguments.callee);this.support.timeupdateEvent=true;this.player.manualTimeUpdatesOff()})},manualTimeUpdatesOff: function(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.removeEvent("play",this.trackCurrentTime);this.removeEvent("pause",this.stopTrackingCurrentTime)},trackCurrentTime: function(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}
this.currentTimeInterval=setInterval(_V_.proxy(this, function(){this.triggerEvent("timeupdate")}),250)},stopTrackingCurrentTime: function(){clearInterval(this.currentTimeInterval)},onEnded: function(){if(this.options.loop){this.currentTime(0);this.play()} else{this.pause();this.currentTime(0);this.pause()}},onPlay: function(){_V_.removeClass(this.el,"vjs-paused");_V_.addClass(this.el,"vjs-playing")},onPause: function(){_V_.removeClass(this.el,"vjs-playing");_V_.addClass(this.el,"vjs-paused")},onProgress: function(){if(this.bufferedPercent()==1){this.triggerEvent("loadedalldata")}},onError: function(e){_V_.log("Video Error",e)},techCall: function(method,arg){if(!this.tech.isReady){this.tech.ready(function(){this[method](arg)})} else{try{this.tech[method](arg)} catch(e){_V_.log(e)}}},techGet: function(method){if(this.tech.isReady){try{return this.tech[method]()} catch(e){if(this.tech[method]===undefined){_V_.log("Video.js: "+method+" method not defined for "+this.techName+" playback technology.",e)} else{if(e.name=="TypeError"){_V_.log("Video.js: "+method+" unavailable on "+this.techName+" playback technology element.",e);this.tech.isReady=false} else{_V_.log(e)}}}}
return},play: function(){this.techCall("play");return this},pause: function(){this.techCall("pause");return this},paused: function(){return(this.techGet("paused")===false)?false:true},currentTime: function(seconds){if(seconds!==undefined){this.values.lastSetCurrentTime=seconds;this.techCall("setCurrentTime",seconds);if(this.manualTimeUpdates){this.triggerEvent("timeupdate")}
return this}
return this.values.currentTime=(this.techGet("currentTime")||0)},duration: function(){return parseFloat(this.techGet("duration"))},remainingTime: function(){return this.duration()-this.currentTime()},buffered: function(){var buffered=this.techGet("buffered"),start=0,end=this.values.bufferEnd=this.values.bufferEnd||0,timeRange;if(buffered&&buffered.length>0&&buffered.end(0)!==end){end=buffered.end(0);this.values.bufferEnd=end}
return _V_.createTimeRange(start,end)},bufferedPercent: function(){return(this.duration())?this.buffered().end(0)/this.duration():0},volume: function(percentAsDecimal){var vol;if(percentAsDecimal!==undefined){vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.values.volume=vol;this.techCall("setVolume",vol);_V_.setLocalStorage("volume",vol);return this}
vol=parseFloat(this.techGet("volume"));return(isNaN(vol))?1:vol},muted: function(muted){if(muted!==undefined){this.techCall("setMuted",muted);return this}
return this.techGet("muted")||false},width: function(width,skipListeners){if(width!==undefined){this.el.width=width;this.el.style.width=width+"px";if(!skipListeners){this.triggerEvent("resize")}
return this}
return parseInt(this.el.getAttribute("width"))},height: function(height){if(height!==undefined){this.el.height=height;this.el.style.height=height+"px";this.triggerEvent("resize");return this}
return parseInt(this.el.getAttribute("height"))},size: function(width,height){return this.width(width,true).height(height)},supportsFullScreen: function(){return this.techGet("supportsFullScreen")||false},requestFullScreen: function(){var requestFullScreen=_V_.support.requestFullScreen;this.isFullScreen=true;if(requestFullScreen){_V_.addEvent(document,requestFullScreen.eventName,this.proxy(function(){this.isFullScreen=document[requestFullScreen.isFullScreen];if(this.isFullScreen==false){_V_.removeEvent(document,requestFullScreen.eventName,arguments.callee)}
this.triggerEvent("fullscreenchange")}));if(this.tech.support.fullscreenResize===false&&this.options.flash.iFrameMode!=true){this.pause();this.unloadTech();_V_.addEvent(document,requestFullScreen.eventName,this.proxy(function(){_V_.removeEvent(document,requestFullScreen.eventName,arguments.callee);this.loadTech(this.techName,{src:this.values.src})}));this.el[requestFullScreen.requestFn]()} else{this.el[requestFullScreen.requestFn]()}} else if(this.tech.supportsFullScreen()){this.triggerEvent("fullscreenchange");this.techCall("enterFullScreen")} else{this.triggerEvent("fullscreenchange");this.enterFullWindow()}
return this},cancelFullScreen: function(){var requestFullScreen=_V_.support.requestFullScreen;this.isFullScreen=false;if(requestFullScreen){if(this.tech.support.fullscreenResize===false&&this.options.flash.iFrameMode!=true){this.pause();this.unloadTech();_V_.addEvent(document,requestFullScreen.eventName,this.proxy(function(){_V_.removeEvent(document,requestFullScreen.eventName,arguments.callee);this.loadTech(this.techName,{src:this.values.src})}));document[requestFullScreen.cancelFn]()} else{document[requestFullScreen.cancelFn]()}} else if(this.tech.supportsFullScreen()){this.techCall("exitFullScreen");this.triggerEvent("fullscreenchange")} else{this.exitFullWindow();this.triggerEvent("fullscreenchange")}
return this},enterFullWindow: function(){this.isFullWindow=true;this.docOrigOverflow=document.documentElement.style.overflow;_V_.addEvent(document,"keydown",_V_.proxy(this,this.fullWindowOnEscKey));document.documentElement.style.overflow='hidden';_V_.addClass(document.body,"vjs-full-window");_V_.addClass(this.el,"vjs-fullscreen");this.triggerEvent("enterFullWindow")},fullWindowOnEscKey: function(event){if(event.keyCode==27){if(this.isFullScreen==true){this.cancelFullScreen()} else{this.exitFullWindow()}}},exitFullWindow: function(){this.isFullWindow=false;_V_.removeEvent(document,"keydown",this.fullWindowOnEscKey);document.documentElement.style.overflow=this.docOrigOverflow;_V_.removeClass(document.body,"vjs-full-window");_V_.removeClass(this.el,"vjs-fullscreen");this.triggerEvent("exitFullWindow")},selectSource: function(sources){for(var i=0,j=this.options.techOrder;i<j.length;i++){var techName=j[i],tech=_V_[techName];if(tech.isSupported()){for(var a=0,b=sources;a<b.length;a++){var source=b[a];if(tech.canPlaySource.call(this,source)){return{source:source,tech:techName}}}}}
return false},src: function(source){if(source instanceof Array){var sourceTech=this.selectSource(source),source,techName;if(sourceTech){source=sourceTech.source;techName=sourceTech.tech;if(techName==this.techName){this.src(source)} else{this.loadTech(techName,source)}} else{_V_.log("No compatible source and playback technology were found.")}} else if(source instanceof Object){if(_V_[this.techName].canPlaySource(source)){this.src(source.src)} else{this.src([source])}} else{this.values.src=source;if(!this.isReady){this.ready(function(){this.src(source)})} else{this.techCall("src",source);if(this.options.preload=="auto"){this.load()}
if(this.options.autoplay){this.play()}}}
return this},load: function(){this.techCall("load");return this},currentSrc: function(){return this.techGet("currentSrc")||this.values.src||""},preload: function(value){if(value!==undefined){this.techCall("setPreload",value);this.options.preload=value;return this}
return this.techGet("preload")},autoplay: function(value){if(value!==undefined){this.techCall("setAutoplay",value);this.options.autoplay=value;return this}
return this.techGet("autoplay",value)},loop: function(value){if(value!==undefined){this.techCall("setLoop",value);this.options.loop=value;return this}
return this.techGet("loop")},controls: function(){return this.options.controls},poster: function(){return this.techGet("poster")},error: function(){return this.techGet("error")},ended: function(){return this.techGet("ended")}});(function(){var requestFn,cancelFn,eventName,isFullScreen,playerProto=_V_.Player.prototype;if(document.cancelFullscreen!==undefined){requestFn="requestFullscreen";cancelFn="exitFullscreen";eventName="fullscreenchange";isFullScreen="fullScreen"} else{_V_.each(["moz","webkit"], function(prefix){if((prefix!="moz"||document.mozFullScreenEnabled)&&document[prefix+"CancelFullScreen"]!==undefined){requestFn=prefix+"RequestFullScreen";cancelFn=prefix+"CancelFullScreen";eventName=prefix+"fullscreenchange";if(prefix=="webkit"){isFullScreen=prefix+"IsFullScreen"} else{isFullScreen=prefix+"FullScreen"}}})}
if(requestFn){_V_.support.requestFullScreen={requestFn:requestFn,cancelFn:cancelFn,eventName:eventName,isFullScreen:isFullScreen}}})();_V_.PlaybackTech=_V_.Component.extend({init: function(player,options){},onClick: function(){if(this.player.options.controls){_V_.PlayToggle.prototype.onClick.call(this)}}});_V_.apiMethods="play,pause,paused,currentTime,setCurrentTime,duration,buffered,volume,setVolume,muted,setMuted,width,height,supportsFullScreen,enterFullScreen,src,load,currentSrc,preload,setPreload,autoplay,setAutoplay,loop,setLoop,error,networkState,readyState,seeking,initialTime,startOffsetTime,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks,defaultPlaybackRate,playbackRate,mediaGroup,controller,controls,defaultMuted".split(",");_V_.each(_V_.apiMethods, function(methodName){_V_.PlaybackTech.prototype[methodName]=function(){throw new Error("The '"+methodName+"' method is not available on the playback technology's API")}});_V_.html5=_V_.PlaybackTech.extend({init: function(player,options,ready){this.player=player;this.el=this.createElement();this.ready(ready);this.addEvent("click",this.proxy(this.onClick));var source=options.source;if(source&&this.el.currentSrc==source.src){player.triggerEvent("loadstart")} else if(source){this.el.src=source.src}
player.ready(function(){if(this.options.autoplay&&this.paused()){this.tag.poster=null;this.play()}});this.setupTriggers();this.triggerReady()},destroy: function(){this.player.tag=false;this.removeTriggers();this.el.parentNode.removeChild(this.el)},createElement: function(){var html5=_V_.html5,player=this.player,el=player.tag,newEl;if(!el||this.support.movingElementInDOM===false){if(el){player.el.removeChild(el)}
newEl=_V_.createElement("video",{id:el.id||player.el.id+"_html5_api",className:el.className||"vjs-tech"});el=newEl;_V_.insertFirst(el,player.el)}
_V_.each(["autoplay","preload","loop","muted"], function(attr){if(player.options[attr]!==null){el[attr]=player.options[attr]}},this);return el},setupTriggers: function(){_V_.each.call(this,_V_.html5.events, function(type){_V_.addEvent(this.el,type,_V_.proxy(this.player,this.eventHandler))})},removeTriggers: function(){_V_.each.call(this,_V_.html5.events, function(type){_V_.removeEvent(this.el,type,_V_.proxy(this.player,this.eventHandler))})},eventHandler: function(e){e.stopPropagation();this.triggerEvent(e)},play: function(){this.el.play()},pause: function(){this.el.pause()},paused: function(){return this.el.paused},currentTime: function(){return this.el.currentTime},setCurrentTime: function(seconds){try{this.el.currentTime=seconds} catch(e){_V_.log(e,"Video isn't ready. (VideoJS)")}},duration: function(){return this.el.duration||0},buffered: function(){return this.el.buffered},volume: function(){return this.el.volume},setVolume: function(percentAsDecimal){this.el.volume=percentAsDecimal},muted: function(){return this.el.muted},setMuted: function(muted){this.el.muted=muted},width: function(){return this.el.offsetWidth},height: function(){return this.el.offsetHeight},supportsFullScreen: function(){if(typeof this.el.webkitEnterFullScreen=='function'){if(!navigator.userAgent.match("Chrome")&&!navigator.userAgent.match("Mac OS X 10.5")){return true}}
return false},enterFullScreen: function(){try{this.el.webkitEnterFullScreen()} catch(e){if(e.code==11){_V_.log("VideoJS: Video not ready.")}}},src: function(src){this.el.src=src},load: function(){this.el.load()},currentSrc: function(){return this.el.currentSrc},preload: function(){return this.el.preload},setPreload: function(val){this.el.preload=val},autoplay: function(){return this.el.autoplay},setAutoplay: function(val){this.el.autoplay=val},loop: function(){return this.el.loop},setLoop: function(val){this.el.loop=val},error: function(){return this.el.error},seeking: function(){return this.el.seeking},ended: function(){return this.el.ended},controls: function(){return this.player.options.controls},defaultMuted: function(){return this.el.defaultMuted}});_V_.html5.isSupported=function(){return!!document.createElement("video").canPlayType};_V_.html5.canPlaySource=function(srcObj){return!!document.createElement("video").canPlayType(srcObj.type)};_V_.html5.events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(",");_V_.html5.prototype.support={fullscreen:(typeof _V_.testVid.webkitEnterFullScreen!==undefined)?(!_V_.ua.match("Chrome")&&!_V_.ua.match("Mac OS X 10.5")?true:false):false,movingElementInDOM:!_V_.isIOS()};if(_V_.isAndroid()){if(_V_.androidVersion()<3){document.createElement("video").constructor.prototype.canPlayType=function(type){return(type&&type.toLowerCase().indexOf("video/mp4")!=-1)?"maybe":""}}}
_V_.flash=_V_.PlaybackTech.extend({init: function(player,options){this.player=player;var source=options.source,parentEl=options.parentEl,placeHolder=this.el=_V_.createElement("div",{id:parentEl.id+"_temp_flash"}),objId=player.el.id+"_flash_api",playerOptions=player.options,flashVars=_V_.merge({readyFunction:"_V_.flash.onReady",eventProxyFunction:"_V_.flash.onEvent",errorEventProxyFunction:"_V_.flash.onError",autoplay:playerOptions.autoplay,preload:playerOptions.preload,loop:playerOptions.loop,muted:playerOptions.muted},options.flashVars),params=_V_.merge({wmode:"opaque",bgcolor:"#000000"},options.params),attributes=_V_.merge({id:objId,name:objId,'class':'vjs-tech'},options.attributes)
;if(source){flashVars.src=encodeURIComponent(_V_.getAbsoluteURL(source.src))}
_V_.insertFirst(placeHolder,parentEl);if(options.startTime){this.ready(function(){this.load();this.play();this.currentTime(options.startTime)})}
if(options.iFrameMode==true&&!_V_.isFF){var iFrm=_V_.createElement("iframe",{id:objId+"_iframe",name:objId+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});flashVars.readyFunction="ready";flashVars.eventProxyFunction="events";flashVars.errorEventProxyFunction="errors";_V_.addEvent(iFrm,"load",_V_.proxy(this, function(){var iDoc,objTag,swfLoc,iWin=iFrm.contentWindow,varString="";iDoc=iFrm.contentDocument?iFrm.contentDocument:iFrm.contentWindow.document;iDoc.write(_V_.flash.getEmbedCode(options.swf,flashVars,params,attributes));iWin.player=this.player;iWin.ready=_V_.proxy(this.player, function(currSwf){var el=iDoc.getElementById(currSwf),player=this,tech=player.tech;tech.el=el;_V_.addEvent(el,"click",tech.proxy(tech.onClick));_V_.flash.checkReady(tech)});iWin.events=_V_.proxy(this.player, function(swfID,eventName,other){var player=this;if(player&&player.techName=="flash"){player.triggerEvent(eventName)}});iWin.errors=_V_.proxy(this.player, function(swfID,eventName){_V_.log("Flash Error",eventName)})}));placeHolder.parentNode.replaceChild(iFrm,placeHolder)} else{_V_.flash.embed(options.swf,placeHolder,flashVars,params,attributes)}},destroy: function(){this.el.parentNode.removeChild(this.el)},play: function(){this.el.vjs_play()},pause: function(){this.el.vjs_pause()},src: function(src){src=_V_.getAbsoluteURL(src);this.el.vjs_src(src);if(this.player.autoplay()){var tech=this;setTimeout(function(){tech.play()},0)}},load: function(){this.el.vjs_load()},poster: function(){this.el.vjs_getProperty("poster")},buffered: function(){return _V_.createTimeRange(0,this.el.vjs_getProperty("buffered"))},supportsFullScreen: function(){return false},enterFullScreen: function(){return false}});(function(){var api=_V_.flash.prototype,readWrite="preload,currentTime,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),readOnly="error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(","),callOnly="load,play,pause".split(",");createSetter=function(attr){var attrUpper=attr.charAt(0).toUpperCase()+attr.slice(1);api["set"+attrUpper]=function(val){return this.el.vjs_setProperty(attr,val)}},createGetter=function(attr){api[attr]=function(){return this.el.vjs_getProperty(attr)}}
;_V_.each(readWrite, function(attr){createGetter(attr);createSetter(attr)});_V_.each(readOnly, function(attr){createGetter(attr)})})();_V_.flash.isSupported=function(){return _V_.flash.version()[0]>=10};_V_.flash.canPlaySource=function(srcObj){if(srcObj.type in _V_.flash.prototype.support.formats){return "maybe"}};_V_.flash.prototype.support={formats:{"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},progressEvent:false,timeupdateEvent:false,fullscreenResize:false,parentResize:!(_V_.ua.match("Firefox"))};_V_.flash.onReady=function(currSwf){var el=_V_.el(currSwf);var player=el.player||el.parentNode.player,tech=player.tech;el.player=player;tech.el=el;tech.addEvent("click",tech.onClick);_V_.flash.checkReady(tech)};_V_.flash.checkReady=function(tech){if(tech.el.vjs_getProperty){tech.triggerReady()} else{setTimeout(function(){_V_.flash.checkReady(tech)},50)}};_V_.flash.onEvent=function(swfID,eventName){var player=_V_.el(swfID).player;player.triggerEvent(eventName)};_V_.flash.onError=function(swfID,err){var player=_V_.el(swfID).player;player.triggerEvent("error");_V_.log("Flash Error",err,swfID)};_V_.flash.version=function(){var version='0,0,0'
try{version=new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g, ',').match(/^,?(.+),?$/)[1]} catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){version=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g, ",").match(/^,?(.+),?$/)[1]}} catch(e){}}
return version.split(",")}
_V_.flash.embed=function(swf,placeHolder,flashVars,params,attributes){var code=_V_.flash.getEmbedCode(swf,flashVars,params,attributes),obj=_V_.createElement("div",{innerHTML:code}).childNodes[0],par=placeHolder.parentNode
;placeHolder.parentNode.replaceChild(obj,placeHolder);if(_V_.isIE()){var newObj=par.childNodes[0];setTimeout(function(){newObj.style.display="block"},1000)}
return obj};_V_.flash.getEmbedCode=function(swf,flashVars,params,attributes){var objTag='<object type="application/x-shockwave-flash"',flashVarsString='',paramsString=''
attrsString='';if(flashVars){_V_.eachProp(flashVars, function(key,val){flashVarsString+=(key+"="+val+"&amp;")})}
params=_V_.merge({movie:swf,flashvars:flashVarsString,allowScriptAccess:"always",allowNetworking:"all"},params);_V_.eachProp(params, function(key,val){paramsString+='<param name="'+key+'" value="'+val+'" />'});attributes=_V_.merge({data:swf,width:"100%",height:"100%"},attributes);_V_.eachProp(attributes, function(key,val){attrsString+=(key+'="'+val+'" ')});return objTag+attrsString+'>'+paramsString+'</object>'}
_V_.merge(_V_.Player.prototype,{addTextTracks: function(trackObjects){var tracks=this.textTracks=(this.textTracks)?this.textTracks:[],i=0,j=trackObjects.length,track,Kind;for(;i<j;i++){Kind=_V_.uc(trackObjects[i].kind||"subtitles");track=new _V_[Kind+"Track"](this,trackObjects[i]);tracks.push(track);if(track['default']){this.ready(_V_.proxy(track,track.show))}}
return this},showTextTrack: function(id,disableSameKind){var tracks=this.textTracks,i=0,j=tracks.length,track,showTrack,kind;for(;i<j;i++){track=tracks[i];if(track.id===id){track.show();showTrack=track} else if(disableSameKind&&track.kind==disableSameKind&&track.mode>0){track.disable()}}
kind=(showTrack)?showTrack.kind:((disableSameKind)?disableSameKind:false);if(kind){this.triggerEvent(kind+"trackchange")}
return this}});_V_.Track=_V_.Component.extend({init: function(player,options){this._super(player,options);_V_.merge(this,{id:options.id||("vjs_"+options.kind+"_"+options.language+"_"+_V_.guid++),src:options.src,"default":options["default"],title:options.title,language:options.srclang,label:options.label,cues:[],activeCues:[],readyState:0,mode:0})},createElement: function(){return this._super("div",{className:"vjs-"+this.kind+" vjs-text-track"})},show: function(){this.activate();this.mode=2;this._super()},hide: function(){this.activate();this.mode=1;this._super()},disable: function(){if(this.mode==2){this.hide()}
this.deactivate();this.mode=0},activate: function(){if(this.readyState==0){this.load()}
if(this.mode==0){this.player.addEvent("timeupdate",this.proxy(this.update,this.id));this.player.addEvent("ended",this.proxy(this.reset,this.id));if(this.kind=="captions"||this.kind=="subtitles"){this.player.textTrackDisplay.addComponent(this)}}},deactivate: function(){this.player.removeEvent("timeupdate",this.proxy(this.update,this.id));this.player.removeEvent("ended",this.proxy(this.reset,this.id));this.reset();this.player.textTrackDisplay.removeComponent(this)},load: function(){if(this.readyState==0){this.readyState=1;_V_.get(this.src,this.proxy(this.parseCues),this.proxy(this.onError))}},onError: function(err){this.error=err;this.readyState=3;this.triggerEvent("error")},parseCues: function(srcContent){var cue,time,text,lines=srcContent.split("\n"),line="",id;for(var i=1,j=lines.length;i<j;i++){line=_V_.trim(lines[i]);if(line){if(line.indexOf("-->")==-1){id=line;line=_V_.trim(lines[++i])} else{id=this.cues.length}
cue={id:id,index:this.cues.length};time=line.split(" --> ");cue.startTime=this.parseCueTime(time[0]);cue.endTime=this.parseCueTime(time[1]);text=[];while(lines[++i]&&(line=_V_.trim(lines[i]))){text.push(line)}
cue.text=text.join('<br/>');this.cues.push(cue)}}
this.readyState=2;this.triggerEvent("loaded")},parseCueTime: function(timeText){var parts=timeText.split(':'),time=0,hours,minutes,other,seconds,ms,flags;if(parts.length==3){hours=parts[0];minutes=parts[1];other=parts[2]} else{hours=0;minutes=parts[0];other=parts[1]}
other=other.split(/\s+/)
seconds=other.splice(0,1)[0];seconds=seconds.split(/\.|,/);ms=parseFloat(seconds[1]);seconds=seconds[0];time+=parseFloat(hours) * 3600;time+=parseFloat(minutes) * 60;time+=parseFloat(seconds);if(ms){time+=ms/1000}
return time},update: function(){if(this.cues.length>0){var time=this.player.currentTime();if(this.prevChange===undefined||time<this.prevChange||this.nextChange<=time){var cues=this.cues,newNextChange=this.player.duration(),newPrevChange=0,reverse=false,newCues=[],firstActiveIndex,lastActiveIndex,html="",cue,i,j;if(time>=this.nextChange||this.nextChange===undefined){i=(this.firstActiveIndex!==undefined)?this.firstActiveIndex:0} else{reverse=true;i=(this.lastActiveIndex!==undefined)?this.lastActiveIndex:cues.length-1}
while(true){cue=cues[i];if(cue.endTime<=time){newPrevChange=Math.max(newPrevChange,cue.endTime);if(cue.active){cue.active=false}} else if(time<cue.startTime){newNextChange=Math.min(newNextChange,cue.startTime);if(cue.active){cue.active=false}
if(!reverse){break}} else{if(reverse){newCues.splice(0,0,cue);if(lastActiveIndex===undefined){lastActiveIndex=i}
firstActiveIndex=i} else{newCues.push(cue);if(firstActiveIndex===undefined){firstActiveIndex=i}
lastActiveIndex=i}
newNextChange=Math.min(newNextChange,cue.endTime);newPrevChange=Math.max(newPrevChange,cue.startTime);cue.active=true}
if(reverse){if(i===0){break} else{i--}} else{if(i===cues.length-1){break} else{i++}}}
this.activeCues=newCues;this.nextChange=newNextChange;this.prevChange=newPrevChange;this.firstActiveIndex=firstActiveIndex;this.lastActiveIndex=lastActiveIndex;this.updateDisplay();this.triggerEvent("cuechange")}}},updateDisplay: function(){var cues=this.activeCues,html="",i=0,j=cues.length;for(;i<j;i++){html+="<span class='vjs-tt-cue'>"+cues[i].text+"</span>"}
this.el.innerHTML=html},reset: function(){this.nextChange=0;this.prevChange=this.player.duration();this.firstActiveIndex=0;this.lastActiveIndex=0}});_V_.CaptionsTrack=_V_.Track.extend({kind:"captions"});_V_.SubtitlesTrack=_V_.Track.extend({kind:"subtitles"});_V_.ChaptersTrack=_V_.Track.extend({kind:"chapters"});_V_.TextTrackDisplay=_V_.Component.extend({createElement: function(){return this._super("div",{className:"vjs-text-track-display"})}});_V_.TextTrackMenuItem=_V_.MenuItem.extend({init: function(player,options){var track=this.track=options.track;options.label=track.label;options.selected=track["default"];this._super(player,options);this.player.addEvent(track.kind+"trackchange",_V_.proxy(this,this.update))},onClick: function(){this._super();this.player.showTextTrack(this.track.id,this.track.kind)},update: function(){if(this.track.mode==2){this.selected(true)} else{this.selected(false)}}});_V_.OffTextTrackMenuItem=_V_.TextTrackMenuItem.extend({init: function(player,options){options.track={kind:options.kind,player:player,label:"Off"}
this._super(player,options)},onClick: function(){this._super();this.player.showTextTrack(this.track.id,this.track.kind)},update: function(){var tracks=this.player.textTracks,i=0,j=tracks.length,track,off=true;for(;i<j;i++){track=tracks[i];if(track.kind==this.track.kind&&track.mode==2){off=false}}
if(off){this.selected(true)} else{this.selected(false)}}});_V_.TextTrackButton=_V_.Button.extend({init: function(player,options){this._super(player,options);this.menu=this.createMenu();if(this.items.length===0){this.hide()}},createMenu: function(){var menu=new _V_.Menu(this.player);menu.el.appendChild(_V_.createElement("li",{className:"vjs-menu-title",innerHTML:_V_.uc(this.kind)}));menu.addItem(new _V_.OffTextTrackMenuItem(this.player,{kind:this.kind}))
this.items=this.createItems();this.each(this.items, function(item){menu.addItem(item)});this.addComponent(menu);return menu},createItems: function(){var items=[];this.each(this.player.textTracks, function(track){if(track.kind===this.kind){items.push(new _V_.TextTrackMenuItem(this.player,{track:track}))}});return items},buildCSSClass: function(){return this.className+" vjs-menu-button "+this._super()},onFocus: function(){this.menu.lockShowing();_V_.one(this.menu.el.childNodes[this.menu.el.childNodes.length-1],"blur",this.proxy(function(){this.menu.unlockShowing()}))},onBlur: function(){},onClick: function(){this.one("mouseout",this.proxy(function(){this.menu.unlockShowing();this.el.blur()}))}});_V_.CaptionsButton=_V_.TextTrackButton.extend({kind:"captions",buttonText:"Captions",className:"vjs-captions-button"});_V_.SubtitlesButton=_V_.TextTrackButton.extend({kind:"subtitles",buttonText:"Subtitles",className:"vjs-subtitles-button"});_V_.ChaptersButton=_V_.TextTrackButton.extend({kind:"chapters",buttonText:"Chapters",className:"vjs-chapters-button",createItems: function(chaptersTrack){var items=[];this.each(this.player.textTracks, function(track){if(track.kind===this.kind){items.push(new _V_.TextTrackMenuItem(this.player,{track:track}))}});return items},createMenu: function(){var tracks=this.player.textTracks,i=0,j=tracks.length,track,chaptersTrack,items=this.items=[];for(;i<j;i++){track=tracks[i];if(track.kind==this.kind&&track["default"]){if(track.readyState<2){this.chaptersTrack=track;track.addEvent("loaded",this.proxy(this.createMenu));return} else{chaptersTrack=track;break}}}
var menu=this.menu=new _V_.Menu(this.player);menu.el.appendChild(_V_.createElement("li",{className:"vjs-menu-title",innerHTML:_V_.uc(this.kind)}));if(chaptersTrack){var cues=chaptersTrack.cues,i=0,j=cues.length,cue,mi;for(;i<j;i++){cue=cues[i];mi=new _V_.ChaptersTrackMenuItem(this.player,{track:chaptersTrack,cue:cue});items.push(mi);menu.addComponent(mi)}}
this.addComponent(menu);if(this.items.length>0){this.show()}
return menu}});_V_.ChaptersTrackMenuItem=_V_.MenuItem.extend({init: function(player,options){var track=this.track=options.track,cue=this.cue=options.cue,currentTime=player.currentTime();options.label=cue.text;options.selected=(cue.startTime<=currentTime&&currentTime<cue.endTime);this._super(player,options);track.addEvent("cuechange",_V_.proxy(this,this.update))},onClick: function(){this._super();this.player.currentTime(this.cue.startTime);this.update(this.cue.startTime)},update: function(time){var cue=this.cue,currentTime=this.player.currentTime();if(cue.startTime<=currentTime&&currentTime<cue.endTime){this.selected(true)} else{this.selected(false)}}});_V_.merge(_V_.ControlBar.prototype.options.components,{"subtitlesButton":{},"captionsButton":{},"chaptersButton":{}});_V_.autoSetup=function(){var options,vid,player,vids=document.getElementsByTagName("video");if(vids&&vids.length>0){for(var i=0,j=vids.length;i<j;i++){vid=vids[i];if(vid&&vid.getAttribute){if(vid.player===undefined){options=vid.getAttribute("data-setup");if(options!==null){options=JSON.parse(options||"{}");player=_V_(vid,options)}}} else{_V_.autoSetupTimeout(1);break}}} else if(!_V_.windowLoaded){_V_.autoSetupTimeout(1)}};_V_.autoSetupTimeout=function(wait){setTimeout(_V_.autoSetup,wait)};_V_.addEvent(window,"load", function(){_V_.windowLoaded=true});_V_.autoSetup();window.VideoJS=window._V_=VideoJS})(window);

/* - ++resource++collective.nitf/nitf_fixes.js - */
(function($) {

  $.fn.charCount = function(options){
    
    // default configuration properties
    var defaults = {
      allowed: 140,
      optimal: 40,
      warning: 25,
      css: 'counter',
      counterElement: 'span',
      cssOptimal: 'optimal',
      cssWarning: 'warning',
      cssExceeded: 'exceeded',
      counterText: ''
    };
      
    var options = $.extend(defaults, options);
    
    function calculate(obj){
      var count = $(obj).val().length;
      var available = options.allowed - count;
      if (available <= options.optimal && available >=0) {
        $(obj).next().addClass(options.cssOptimal);
      } else {
        $(obj).next().removeClass(options.cssOptimal);
      }

      if(available <= options.warning && available >= 0){
        $(obj).next().addClass(options.cssWarning);
      } else {
        $(obj).next().removeClass(options.cssWarning);
      }

      if(available < 0){
        $(obj).next().addClass(options.cssExceeded);
      } else {
        $(obj).next().removeClass(options.cssExceeded);
      }
      
      $(obj).next().html(options.counterText + available);
    };
        
    this.each(function() {
      $(this).after('<'+ options.counterElement +' class="' + options.css + '">'+ options.counterText +'</'+ options.counterElement +'>');
      calculate(this);
      $(this).keyup(function(){calculate(this)});
      $(this).change(function(){calculate(this)});
    });
    
  };

})(jQuery);



/* - characters-count.js - */
$(document).ready(function() { });

/* - ++resource++collective.polls/js/jquery.flot.js - */
(function(i){i.color={};i.color.make=function(j,k,y,P){var o={};o.r=j||0;o.g=k||0;o.b=y||0;o.a=null!=P?P:1;o.add=function(i,j){for(var k=0;k<i.length;++k)o[i.charAt(k)]+=j;return o.normalize()};o.scale=function(i,k){for(var j=0;j<i.length;++j)o[i.charAt(j)]*=k;return o.normalize()};o.toString=function(){return 1<=o.a?"rgb("+[o.r,o.g,o.b].join()+")":"rgba("+[o.r,o.g,o.b,o.a].join()+")"};o.normalize=function(){function i(j,k,o){return k<j?j:k>o?o:k}o.r=i(0,parseInt(o.r),255);o.g=i(0,parseInt(o.g),255);
o.b=i(0,parseInt(o.b),255);o.a=i(0,o.a,1);return o};o.clone=function(){return i.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};i.color.extract=function(j,k){var y;do{y=j.css(k).toLowerCase();if(""!=y&&"transparent"!=y)break;j=j.parent()}while(!i.nodeName(j.get(0),"body"));"rgba(0, 0, 0, 0)"==y&&(y="transparent");return i.color.parse(y)};i.color.parse=function(j){var k,y=i.color.make;if(k=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(j))return y(parseInt(k[1],10),parseInt(k[2],
10),parseInt(k[3],10));if(k=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(j))return y(parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3],10),parseFloat(k[4]));if(k=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(j))return y(2.55*parseFloat(k[1]),2.55*parseFloat(k[2]),2.55*parseFloat(k[3]));if(k=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(j))return y(2.55*
parseFloat(k[1]),2.55*parseFloat(k[2]),2.55*parseFloat(k[3]),parseFloat(k[4]));if(k=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(j))return y(parseInt(k[1],16),parseInt(k[2],16),parseInt(k[3],16));if(k=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(j))return y(parseInt(k[1]+k[1],16),parseInt(k[2]+k[2],16),parseInt(k[3]+k[3],16));j=i.trim(j).toLowerCase();if("transparent"==j)return y(255,255,255,0);k=L[j]||[0,0,0];return y(k[0],k[1],k[2])};var L={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(i){function L(j,k,y,P){function o(a,d){for(var d=[t].concat(d),b=0;b<a.length;++b)a[b].apply(this,d)}function L(a){for(var d=[],b=0;b<a.length;++b){var c=i.extend(!0,{},f.series);null!=a[b].data?(c.data=a[b].data,delete a[b].data,i.extend(!0,c,a[b]),a[b].data=c.data):c.data=a[b];d.push(c)}v=d;d=v.length;b=[];c=[];for(a=0;a<v.length;++a){var e=v[a].color;null!=e&&(--d,"number"==typeof e?c.push(e):b.push(i.color.parse(v[a].color)))}for(a=0;a<c.length;++a)d=Math.max(d,c[a]+1);b=[];for(a=c=
0;b.length<d;)e=f.colors.length==a?i.color.make(100,100,100):i.color.parse(f.colors[a]),e.scale("rgb",1+0.2*(1==c%2?-1:1)*Math.ceil(c/2)),b.push(e),++a,a>=f.colors.length&&(a=0,++c);for(a=d=0;a<v.length;++a){c=v[a];null==c.color?(c.color=b[d].toString(),++d):"number"==typeof c.color&&(c.color=b[c.color].toString());if(null==c.lines.show){var M,e=!0;for(M in c)if(c[M]&&c[M].show){e=!1;break}e&&(c.lines.show=!0)}c.xaxis=S(B,R(c,"x"));c.yaxis=S(D,R(c,"y"))}na()}function R(a,d){var b=a[d+"axis"];"object"==
typeof b&&(b=b.n);"number"!=typeof b&&(b=1);return b}function K(){return i.grep(B.concat(D),function(a){return a})}function W(a){var d={},b,c;for(b=0;b<B.length;++b)(c=B[b])&&c.used&&(d["x"+c.n]=c.c2p(a.left));for(b=0;b<D.length;++b)(c=D[b])&&c.used&&(d["y"+c.n]=c.c2p(a.top));void 0!==d.x1&&(d.x=d.x1);void 0!==d.y1&&(d.y=d.y1);return d}function S(a,d){a[d-1]||(a[d-1]={n:d,direction:a==B?"x":"y",options:i.extend(!0,{},a==B?f.xaxis:f.yaxis)});return a[d-1]}function na(){function a(a,b,d){b<a.datamin&&
b!=-c&&(a.datamin=b);d>a.datamax&&d!=c&&(a.datamax=d)}var d=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,c=Number.MAX_VALUE,e,f,u,s,p,x,q,g,h,w;i.each(K(),function(a,c){c.datamin=d;c.datamax=b;c.used=!1});for(e=0;e<v.length;++e)p=v[e],p.datapoints={points:[]},o(z.processRawData,[p,p.data,p.datapoints]);for(e=0;e<v.length;++e){p=v[e];var k=p.data,n=p.datapoints.format;if(!n){n=[];n.push({x:!0,number:!0,required:!0});n.push({y:!0,number:!0,required:!0});if(p.bars.show||p.lines.show&&p.lines.fill)n.push({y:!0,
number:!0,required:!1,defaultValue:0}),p.bars.horizontal&&(delete n[n.length-1].y,n[n.length-1].x=!0);p.datapoints.format=n}if(null==p.datapoints.pointsize){p.datapoints.pointsize=n.length;q=p.datapoints.pointsize;x=p.datapoints.points;insertSteps=p.lines.show&&p.lines.steps;p.xaxis.used=p.yaxis.used=!0;for(f=u=0;f<k.length;++f,u+=q){w=k[f];var l=null==w;if(!l)for(s=0;s<q;++s){g=w[s];if(h=n[s])if(h.number&&null!=g&&(g=+g,isNaN(g)?g=null:Infinity==g?g=c:-Infinity==g&&(g=-c)),null==g)h.required&&(l=
!0),null!=h.defaultValue&&(g=h.defaultValue);x[u+s]=g}if(l)for(s=0;s<q;++s)g=x[u+s],null!=g&&(h=n[s],h.x&&a(p.xaxis,g,g),h.y&&a(p.yaxis,g,g)),x[u+s]=null;else if(insertSteps&&0<u&&null!=x[u-q]&&x[u-q]!=x[u]&&x[u-q+1]!=x[u+1]){for(s=0;s<q;++s)x[u+q+s]=x[u+s];x[u+1]=x[u-q+1];u+=q}}}}for(e=0;e<v.length;++e)p=v[e],o(z.processDatapoints,[p,p.datapoints]);for(e=0;e<v.length;++e){p=v[e];x=p.datapoints.points;q=p.datapoints.pointsize;n=p.datapoints.format;w=u=d;l=k=b;for(f=0;f<x.length;f+=q)if(null!=x[f])for(s=
0;s<q;++s)if(g=x[f+s],(h=n[s])&&!(g==c||g==-c))if(h.x&&(g<u&&(u=g),g>k&&(k=g)),h.y)g<w&&(w=g),g>l&&(l=g);if(p.bars.show){switch(p.bars.align){case "left":f=0;break;case "right":f=-p.bars.barWidth;break;case "center":f=-p.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+p.bars.align);}p.bars.horizontal?(w+=f,l+=f+p.bars.barWidth):(u+=f,k+=f+p.bars.barWidth)}a(p.xaxis,u,k);a(p.yaxis,w,l)}i.each(K(),function(a,c){c.datamin==d&&(c.datamin=null);c.datamax==b&&(c.datamax=null)})}function X(a,
d){var b=document.createElement("canvas");b.className=d;b.width=E;b.height=F;a||i(b).css({position:"absolute",left:0,top:0});i(b).appendTo(j);b.getContext||(b=window.G_vmlCanvasManager.initElement(b));b.getContext("2d").save();return b}function Y(){E=j.width();F=j.height();if(0>=E||0>=F)throw Error("Invalid dimensions for plot, width = "+E+", height = "+F);}function Z(a){a.width!=E&&(a.width=E);a.height!=F&&(a.height=F);a=a.getContext("2d");a.restore();a.save()}function oa(a){function d(a){return a}
var b,c,e=a.options.transform||d,f=a.options.inverseTransform;"x"==a.direction?(b=a.scale=J/Math.abs(e(a.max)-e(a.min)),c=Math.min(e(a.max),e(a.min))):(b=a.scale=H/Math.abs(e(a.max)-e(a.min)),b=-b,c=Math.max(e(a.max),e(a.min)));a.p2c=e==d?function(a){return(a-c)*b}:function(a){return(e(a)-c)*b};a.c2p=f?function(a){return f(c+a/b)}:function(a){return c+a/b}}function pa(a){var d=a.labelWidth,b=a.labelHeight,c=a.options.position,e=a.options.tickLength,g=f.grid.axisMargin,u=f.grid.labelMargin,s="x"==
a.direction?B:D,p=i.grep(s,function(a){return a&&a.options.position==c&&a.reserveSpace});i.inArray(a,p)==p.length-1&&(g=0);if(null==e)var e=i.grep(s,function(a){return a&&a.reserveSpace}),x=0==i.inArray(a,e),e=x?"full":5;isNaN(+e)||(u+=+e);"x"==a.direction?(b+=u,"bottom"==c?(h.bottom+=b+g,a.box={top:F-h.bottom,height:b}):(a.box={top:h.top+g,height:b},h.top+=b+g)):(d+=u,"left"==c?(a.box={left:h.left+g,width:d},h.left+=d+g):(h.right+=d+g,a.box={left:E-h.right,width:d}));a.position=c;a.tickLength=e;
a.box.padding=u;a.innermost=x}function qa(){var a=f.grid.minBorderMargin,d={x:0,y:0},b;if(null==a)for(b=a=0;b<v.length;++b)a=Math.max(a,2*(v[b].points.radius+v[b].points.lineWidth/2));d.x=d.y=Math.ceil(a);i.each(K(),function(a,b){var f=b.direction;b.reserveSpace&&(d[f]=Math.ceil(Math.max(d[f],("x"==f?b.labelWidth:b.labelHeight)/2)))});h.left=Math.max(d.x,h.left);h.right=Math.max(d.x,h.right);h.top=Math.max(d.y,h.top);h.bottom=Math.max(d.y,h.bottom)}function $(){var a,d=K();a=f.grid.show;for(var b in h){var c=
f.grid.margin||0;h[b]="number"==typeof c?c:c[b]||0}o(z.processOffset,[h]);for(b in h)h[b]+=a?f.grid.borderWidth:0;i.each(d,function(a,b){b.show=b.options.show;null==b.show&&(b.show=b.used);b.reserveSpace=b.show||b.options.reserveSpace;var d=b.options,c=+(null!=d.min?d.min:b.datamin),e=+(null!=d.max?d.max:b.datamax),f=e-c;if(0==f){if(f=0==e?1:0.01,null==d.min&&(c-=f),null==d.max||null!=d.min)e+=f}else{var g=d.autoscaleMargin;if(null!=g&&(null==d.min&&(c-=f*g,0>c&&(null!=b.datamin&&0<=b.datamin)&&(c=
0)),null==d.max))e+=f*g,0<e&&(null!=b.datamax&&0>=b.datamax)&&(e=0)}b.min=c;b.max=e});if(a){var e={style:j.css("font-style"),size:Math.round(0.8*(+j.css("font-size").replace("px","")||13)),variant:j.css("font-variant"),weight:j.css("font-weight"),family:j.css("font-family")};b=i.grep(d,function(a){return a.reserveSpace});i.each(b,function(a,b){ra(b);var d=b.options.ticks,c=[];null==d||"number"==typeof d&&0<d?c=b.tickGenerator(b):d&&(c=i.isFunction(d)?d(b):d);var f;b.ticks=[];for(d=0;d<c.length;++d){var q=
null,h=c[d];"object"==typeof h?(f=+h[0],1<h.length&&(q=h[1])):f=+h;null==q&&(q=b.tickFormatter(f,b));isNaN(f)||b.ticks.push({v:f,label:q})}c=b.ticks;if(b.options.autoscaleMargin&&0<c.length&&(null==b.options.min&&(b.min=Math.min(b.min,c[0].v)),null==b.options.max&&1<c.length))b.max=Math.max(b.max,c[c.length-1].v);b.font=i.extend({},e,b.options.font);c=b.options;d=b.ticks||[];f=c.labelWidth||0;q=c.labelHeight||0;h=b.font;g.save();g.font=h.style+" "+h.variant+" "+h.weight+" "+h.size+"px '"+h.family+
"'";for(var k=0;k<d.length;++k){var w=d[k];w.lines=[];w.width=w.height=0;if(w.label){for(var j=w.label.replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n"),n=0;n<j.length;++n){var l={text:j[n]},m=g.measureText(l.text);l.width=m.width;l.height=null!=m.height?m.height:h.size;l.height+=Math.round(0.15*h.size);w.width=Math.max(l.width,w.width);w.height+=l.height;w.lines.push(l)}null==c.labelWidth&&(f=Math.max(f,w.width));null==c.labelHeight&&(q=Math.max(q,w.height))}}g.restore();b.labelWidth=Math.ceil(f);b.labelHeight=
Math.ceil(q)});for(a=b.length-1;0<=a;--a)pa(b[a]);qa();i.each(b,function(a,b){"x"==b.direction?(b.box.left=h.left-b.labelWidth/2,b.box.width=E-h.left-h.right+b.labelWidth):(b.box.top=h.top-b.labelHeight/2,b.box.height=F-h.bottom-h.top+b.labelHeight)})}J=E-h.left-h.right;H=F-h.bottom-h.top;i.each(d,function(a,b){oa(b)});sa()}function ra(a){var d=a.options,b;b="number"==typeof d.ticks&&0<d.ticks?d.ticks:0.3*Math.sqrt("x"==a.direction?E:F);a.delta=(a.max-a.min)/b;if(!d.mode){b=d.tickDecimals;var c=-Math.floor(Math.log(a.delta)/
Math.LN10);null!=b&&c>b&&(c=b);var e=Math.pow(10,-c),f=a.delta/e,g;if(1.5>f)g=1;else if(3>f){if(g=2,2.25<f&&(null==b||c+1<=b))g=2.5,++c}else g=7.5>f?5:10;g*=e;null!=d.minTickSize&&g<d.minTickSize&&(g=d.minTickSize);a.tickDecimals=Math.max(0,null!=b?b:c);a.tickSize=d.tickSize||g;a.tickGenerator=function(a){var b=[],d=a.tickSize*Math.floor(a.min/a.tickSize),c=0,e=Number.NaN,f;do{f=e;e=d+c*a.tickSize;b.push(e);++c}while(e<a.max&&e!=f);return b};a.tickFormatter=function(a,b){return a.toFixed(b.tickDecimals)}}i.isFunction(d.tickFormatter)&&
(a.tickFormatter=function(a,b){return""+d.tickFormatter(a,b)});if(null!=d.alignTicksWithAxis){var s=("x"==a.direction?B:D)[d.alignTicksWithAxis-1];if(s&&s.used&&s!=a){b=a.tickGenerator(a);if(0<b.length&&(null==d.min&&(a.min=Math.min(a.min,b[0])),null==d.max&&1<b.length))a.max=Math.max(a.max,b[b.length-1]);a.tickGenerator=function(a){var b=[],d,c;for(c=0;c<s.ticks.length;++c){d=(s.ticks[c].v-s.min)/(s.max-s.min);d=a.min+d*(a.max-a.min);b.push(d)}return b};!a.mode&&null==d.tickDecimals&&(b=Math.max(0,
-Math.floor(Math.log(a.delta)/Math.LN10)+1),c=a.tickGenerator(a),1<c.length&&/\..*0$/.test((c[1]-c[0]).toFixed(b))||(a.tickDecimals=b))}}}function aa(){g.clearRect(0,0,E,F);o(z.drawBackground,[g]);var a=f.grid;a.show&&a.backgroundColor&&(g.save(),g.translate(h.left,h.top),g.fillStyle=ba(f.grid.backgroundColor,H,0,"rgba(255, 255, 255, 0)"),g.fillRect(0,0,J,H),g.restore());a.show&&!a.aboveData&&(ca(),da());for(var d=0;d<v.length;++d){o(z.drawSeries,[g,v[d]]);var b=v[d];b.lines.show&&ta(b);b.bars.show&&
ua(b);b.points.show&&va(b)}o(z.draw,[g]);a.show&&a.aboveData&&(ca(),da())}function ea(a,d){for(var b,c,e,f,g=K(),s=0;s<g.length;++s)if(b=g[s],b.direction==d&&(f=d+b.n+"axis",!a[f]&&1==b.n&&(f=d+"axis"),a[f])){c=a[f].from;e=a[f].to;break}a[f]||(b="x"==d?B[0]:D[0],c=a[d+"1"],e=a[d+"2"]);null!=c&&(null!=e&&c>e)&&(f=c,c=e,e=f);return{from:c,to:e,axis:b}}function ca(){var a;g.save();g.translate(h.left,h.top);var d=f.grid.markings;if(d){if(i.isFunction(d)){var b=t.getAxes();b.xmin=b.xaxis.min;b.xmax=b.xaxis.max;
b.ymin=b.yaxis.min;b.ymax=b.yaxis.max;d=d(b)}for(a=0;a<d.length;++a){var b=d[a],c=ea(b,"x"),e=ea(b,"y");null==c.from&&(c.from=c.axis.min);null==c.to&&(c.to=c.axis.max);null==e.from&&(e.from=e.axis.min);null==e.to&&(e.to=e.axis.max);c.to<c.axis.min||(c.from>c.axis.max||e.to<e.axis.min||e.from>e.axis.max)||(c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max),e.from=Math.max(e.from,e.axis.min),e.to=Math.min(e.to,e.axis.max),c.from==c.to&&e.from==e.to||(c.from=c.axis.p2c(c.from),c.to=c.axis.p2c(c.to),
e.from=e.axis.p2c(e.from),e.to=e.axis.p2c(e.to),c.from==c.to||e.from==e.to?(g.beginPath(),g.strokeStyle=b.color||f.grid.markingsColor,g.lineWidth=b.lineWidth||f.grid.markingsLineWidth,g.moveTo(c.from,e.from),g.lineTo(c.to,e.to),g.stroke()):(g.fillStyle=b.color||f.grid.markingsColor,g.fillRect(c.from,e.to,c.to-c.from,e.from-e.to))))}}b=K();d=f.grid.borderWidth;for(c=0;c<b.length;++c){e=b[c];a=e.box;var k=e.tickLength,u,s,p,x;if(e.show&&0!=e.ticks.length){g.strokeStyle=e.options.tickColor||i.color.parse(e.options.color).scale("a",
0.22).toString();g.lineWidth=1;"x"==e.direction?(u=0,s="full"==k?"top"==e.position?0:H:a.top-h.top+("top"==e.position?a.height:0)):(s=0,u="full"==k?"left"==e.position?0:J:a.left-h.left+("left"==e.position?a.width:0));e.innermost||(g.beginPath(),p=x=0,"x"==e.direction?p=J:x=H,1==g.lineWidth&&(u=Math.floor(u)+0.5,s=Math.floor(s)+0.5),g.moveTo(u,s),g.lineTo(u+p,s+x),g.stroke());g.beginPath();for(a=0;a<e.ticks.length;++a){var q=e.ticks[a].v;p=x=0;q<e.min||(q>e.max||"full"==k&&0<d&&(q==e.min||q==e.max))||
("x"==e.direction?(u=e.p2c(q),x="full"==k?-H:k,"top"==e.position&&(x=-x)):(s=e.p2c(q),p="full"==k?-J:k,"left"==e.position&&(p=-p)),1==g.lineWidth&&("x"==e.direction?u=Math.floor(u)+0.5:s=Math.floor(s)+0.5),g.moveTo(u,s),g.lineTo(u+p,s+x))}g.stroke()}}d&&(g.lineWidth=d,g.strokeStyle=f.grid.borderColor,g.strokeRect(-d/2,-d/2,J+d,H+d));g.restore()}function da(){g.save();i.each(K(),function(a,d){if(d.show&&0!=d.ticks.length){var b=d.box,c=d.font;g.fillStyle=d.options.color;g.font=c.style+" "+c.variant+
" "+c.weight+" "+c.size+"px "+c.family;g.textAlign="start";g.textBaseline="middle";for(c=0;c<d.ticks.length;++c){var e=d.ticks[c];if(e.label&&!(e.v<d.min||e.v>d.max))for(var f,u,s=0,p,x=0;x<e.lines.length;++x)p=e.lines[x],"x"==d.direction?(f=h.left+d.p2c(e.v)-p.width/2,u="bottom"==d.position?b.top+b.padding:b.top+b.height-b.padding-e.height):(u=h.top+d.p2c(e.v)-e.height/2,f="left"==d.position?b.left+b.width-b.padding-p.width:b.left+b.padding),u+=p.height/2+s,s+=p.height,i.browser.opera&&(f=Math.floor(f),
u=Math.ceil(u-2)),g.fillText(p.text,f,u)}}});g.restore()}function ta(a){function d(a,b,d,c,e){var f=a.points,a=a.pointsize,h=null,i=null;g.beginPath();for(var k=a;k<f.length;k+=a){var n=f[k-a],l=f[k-a+1],m=f[k],r=f[k+1];if(!(null==n||null==m)){if(l<=r&&l<e.min){if(r<e.min)continue;n=(e.min-l)/(r-l)*(m-n)+n;l=e.min}else if(r<=l&&r<e.min){if(l<e.min)continue;m=(e.min-l)/(r-l)*(m-n)+n;r=e.min}if(l>=r&&l>e.max){if(r>e.max)continue;n=(e.max-l)/(r-l)*(m-n)+n;l=e.max}else if(r>=l&&r>e.max){if(l>e.max)continue;
m=(e.max-l)/(r-l)*(m-n)+n;r=e.max}if(n<=m&&n<c.min){if(m<c.min)continue;l=(c.min-n)/(m-n)*(r-l)+l;n=c.min}else if(m<=n&&m<c.min){if(n<c.min)continue;r=(c.min-n)/(m-n)*(r-l)+l;m=c.min}if(n>=m&&n>c.max){if(m>c.max)continue;l=(c.max-n)/(m-n)*(r-l)+l;n=c.max}else if(m>=n&&m>c.max){if(n>c.max)continue;r=(c.max-n)/(m-n)*(r-l)+l;m=c.max}(n!=h||l!=i)&&g.moveTo(c.p2c(n)+b,e.p2c(l)+d);h=m;i=r;g.lineTo(c.p2c(m)+b,e.p2c(r)+d)}}g.stroke()}function b(a,b,c){for(var d=a.points,a=a.pointsize,e=Math.min(Math.max(0,
c.min),c.max),f=0,h=!1,k=1,i=0,n=0;!(0<a&&f>d.length+a);){var f=f+a,l=d[f-a],m=d[f-a+k],r=d[f],j=d[f+k];if(h){if(0<a&&null!=l&&null==r){n=f;a=-a;k=2;continue}if(0>a&&f==i+a){g.fill();h=!1;a=-a;k=1;f=i=n+a;continue}}if(!(null==l||null==r)){if(l<=r&&l<b.min){if(r<b.min)continue;m=(b.min-l)/(r-l)*(j-m)+m;l=b.min}else if(r<=l&&r<b.min){if(l<b.min)continue;j=(b.min-l)/(r-l)*(j-m)+m;r=b.min}if(l>=r&&l>b.max){if(r>b.max)continue;m=(b.max-l)/(r-l)*(j-m)+m;l=b.max}else if(r>=l&&r>b.max){if(l>b.max)continue;
j=(b.max-l)/(r-l)*(j-m)+m;r=b.max}h||(g.beginPath(),g.moveTo(b.p2c(l),c.p2c(e)),h=!0);if(m>=c.max&&j>=c.max)g.lineTo(b.p2c(l),c.p2c(c.max)),g.lineTo(b.p2c(r),c.p2c(c.max));else if(m<=c.min&&j<=c.min)g.lineTo(b.p2c(l),c.p2c(c.min)),g.lineTo(b.p2c(r),c.p2c(c.min));else{var o=l,M=r;m<=j&&m<c.min&&j>=c.min?(l=(c.min-m)/(j-m)*(r-l)+l,m=c.min):j<=m&&(j<c.min&&m>=c.min)&&(r=(c.min-m)/(j-m)*(r-l)+l,j=c.min);m>=j&&m>c.max&&j<=c.max?(l=(c.max-m)/(j-m)*(r-l)+l,m=c.max):j>=m&&(j>c.max&&m<=c.max)&&(r=(c.max-m)/
(j-m)*(r-l)+l,j=c.max);l!=o&&g.lineTo(b.p2c(o),c.p2c(m));g.lineTo(b.p2c(l),c.p2c(m));g.lineTo(b.p2c(r),c.p2c(j));r!=M&&(g.lineTo(b.p2c(r),c.p2c(j)),g.lineTo(b.p2c(M),c.p2c(j)))}}}}g.save();g.translate(h.left,h.top);g.lineJoin="round";var c=a.lines.lineWidth,e=a.shadowSize;if(0<c&&0<e){g.lineWidth=e;g.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;d(a.datapoints,Math.sin(f)*(c/2+e/2),Math.cos(f)*(c/2+e/2),a.xaxis,a.yaxis);g.lineWidth=e/2;d(a.datapoints,Math.sin(f)*(c/2+e/4),Math.cos(f)*(c/2+e/4),a.xaxis,
a.yaxis)}g.lineWidth=c;g.strokeStyle=a.color;if(e=U(a.lines,a.color,0,H))g.fillStyle=e,b(a.datapoints,a.xaxis,a.yaxis);0<c&&d(a.datapoints,0,0,a.xaxis,a.yaxis);g.restore()}function va(a){function d(a,b,c,d,e,f,h,k){for(var i=a.points,a=a.pointsize,j=0;j<i.length;j+=a){var l=i[j],m=i[j+1];null==l||(l<f.min||l>f.max||m<h.min||m>h.max)||(g.beginPath(),l=f.p2c(l),m=h.p2c(m)+d,"circle"==k?g.arc(l,m,b,0,e?Math.PI:2*Math.PI,!1):k(g,l,m,b,e),g.closePath(),c&&(g.fillStyle=c,g.fill()),g.stroke())}}g.save();
g.translate(h.left,h.top);var b=a.points.lineWidth,c=a.shadowSize,e=a.points.radius,f=a.points.symbol;0<b&&0<c&&(c/=2,g.lineWidth=c,g.strokeStyle="rgba(0,0,0,0.1)",d(a.datapoints,e,null,c+c/2,!0,a.xaxis,a.yaxis,f),g.strokeStyle="rgba(0,0,0,0.2)",d(a.datapoints,e,null,c/2,!0,a.xaxis,a.yaxis,f));g.lineWidth=b;g.strokeStyle=a.color;d(a.datapoints,e,U(a.points,a.color),0,!1,a.xaxis,a.yaxis,f);g.restore()}function fa(a,d,b,c,e,f,g,h,k,i,j,o){var v,w,t,n;j?(n=w=t=!0,v=!1,j=b,b=d+c,e=d+e,a<j&&(d=a,a=j,j=
d,v=!0,w=!1)):(v=w=t=!0,n=!1,j=a+c,a+=e,e=b,b=d,b<e&&(d=b,b=e,e=d,n=!0,t=!1));if(!(a<h.min||j>h.max||b<k.min||e>k.max))if(j<h.min&&(j=h.min,v=!1),a>h.max&&(a=h.max,w=!1),e<k.min&&(e=k.min,n=!1),b>k.max&&(b=k.max,t=!1),j=h.p2c(j),e=k.p2c(e),a=h.p2c(a),b=k.p2c(b),g&&(i.beginPath(),i.moveTo(j,e),i.lineTo(j,b),i.lineTo(a,b),i.lineTo(a,e),i.fillStyle=g(e,b),i.fill()),0<o&&(v||w||t||n))i.beginPath(),i.moveTo(j,e+f),v?i.lineTo(j,b+f):i.moveTo(j,b+f),t?i.lineTo(a,b+f):i.moveTo(a,b+f),w?i.lineTo(a,e+f):i.moveTo(a,
e+f),n?i.lineTo(j,e+f):i.moveTo(j,e+f),i.stroke()}function ua(a){g.save();g.translate(h.left,h.top);g.lineWidth=a.bars.lineWidth;g.strokeStyle=a.color;var d;switch(a.bars.align){case "left":d=0;break;case "right":d=-a.bars.barWidth;break;case "center":d=-a.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+a.bars.align);}(function(b,c,d,f,h,i,j){for(var k=b.points,b=b.pointsize,q=0;q<k.length;q+=b)null!=k[q]&&fa(k[q],k[q+1],k[q+2],c,d,f,h,i,j,g,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,
d,d+a.bars.barWidth,0,a.bars.fill?function(b,c){return U(a.bars,a.color,b,c)}:null,a.xaxis,a.yaxis);g.restore()}function U(a,d,b,c){var e=a.fill;if(!e)return null;if(a.fillColor)return ba(a.fillColor,b,c,d);a=i.color.parse(d);a.a="number"==typeof e?e:0.4;a.normalize();return a.toString()}function sa(){j.find(".legend").remove();if(f.legend.show){for(var a=[],d=!1,b=f.legend.labelFormatter,c,e,g=0;g<v.length;++g)if(c=v[g],e=c.label)0==g%f.legend.noColumns&&(d&&a.push("</tr>"),a.push("<tr>"),d=!0),
b&&(e=b(e,c)),a.push('<td class="legendColorBox"><div style="border:1px solid '+f.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+e+"</td>");d&&a.push("</tr>");0!=a.length&&(d='<table style="font-size:smaller;color:'+f.grid.color+'">'+a.join("")+"</table>",null!=f.legend.container?i(f.legend.container).html(d):(a="",b=f.legend.position,c=f.legend.margin,null==c[0]&&(c=[c,c]),"n"==b.charAt(0)?
a+="top:"+(c[1]+h.top)+"px;":"s"==b.charAt(0)&&(a+="bottom:"+(c[1]+h.bottom)+"px;"),"e"==b.charAt(1)?a+="right:"+(c[0]+h.right)+"px;":"w"==b.charAt(1)&&(a+="left:"+(c[0]+h.left)+"px;"),d=i('<div class="legend">'+d.replace('style="','style="position:absolute;'+a+";")+"</div>").appendTo(j),0!=f.legend.backgroundOpacity&&(b=f.legend.backgroundColor,null==b&&(b=(b=f.grid.backgroundColor)&&"string"==typeof b?i.color.parse(b):i.color.extract(d,"background-color"),b.a=1,b=b.toString()),c=d.children(),i('<div style="position:absolute;width:'+
c.width()+"px;height:"+c.height()+"px;"+a+"background-color:"+b+';"> </div>').prependTo(d).css("opacity",f.legend.backgroundOpacity))))}}function ga(a){f.grid.hoverable&&V("plothover",a,function(a){return!1!=a.hoverable})}function ha(a){f.grid.hoverable&&V("plothover",a,function(){return!1})}function ia(a){V("plotclick",a,function(a){return!1!=a.clickable})}function V(a,d,b){var c=G.offset(),e=d.pageX-c.left-h.left,g=d.pageY-c.top-h.top,i=W({left:e,top:g});i.pageX=d.pageX;i.pageY=d.pageY;var d=f.grid.mouseActiveRadius,
k=d*d+1,p=null,o,q;for(o=v.length-1;0<=o;--o)if(b(v[o])){var t=v[o],y=t.xaxis,w=t.yaxis,A=t.datapoints.points,n=t.datapoints.pointsize,l=y.c2p(e),m=w.c2p(g),r=d/y.scale,B=d/w.scale;y.options.inverseTransform&&(r=Number.MAX_VALUE);w.options.inverseTransform&&(B=Number.MAX_VALUE);if(t.lines.show||t.points.show)for(q=0;q<A.length;q+=n){var z=A[q],C=A[q+1];if(null!=z&&!(z-l>r||z-l<-r||C-m>B||C-m<-B))z=Math.abs(y.p2c(z)-e),C=Math.abs(w.p2c(C)-g),C=z*z+C*C,C<k&&(k=C,p=[o,q/n])}if(t.bars.show&&!p){y="left"==
t.bars.align?0:-t.bars.barWidth/2;t=y+t.bars.barWidth;for(q=0;q<A.length;q+=n)if(z=A[q],C=A[q+1],w=A[q+2],null!=z&&(v[o].bars.horizontal?l<=Math.max(w,z)&&l>=Math.min(w,z)&&m>=C+y&&m<=C+t:l>=z+y&&l<=z+t&&m>=Math.min(w,C)&&m<=Math.max(w,C)))p=[o,q/n]}}p?(o=p[0],q=p[1],n=v[o].datapoints.pointsize,b={datapoint:v[o].datapoints.points.slice(q*n,(q+1)*n),dataIndex:q,series:v[o],seriesIndex:o}):b=null;b&&(b.pageX=parseInt(b.series.xaxis.p2c(b.datapoint[0])+c.left+h.left),b.pageY=parseInt(b.series.yaxis.p2c(b.datapoint[1])+
c.top+h.top));if(f.grid.autoHighlight){for(c=0;c<I.length;++c)e=I[c],e.auto==a&&(!b||!(e.series==b.series&&e.point[0]==b.datapoint[0]&&e.point[1]==b.datapoint[1]))&&ja(e.series,e.point);b&&ka(b.series,b.datapoint,a)}j.trigger(a,[i,b])}function T(){var a=f.interaction.redrawOverlayInterval;-1==a?la():Q||(Q=setTimeout(la,a))}function la(){Q=null;A.save();A.clearRect(0,0,E,F);A.translate(h.left,h.top);var a,d;for(a=0;a<I.length;++a)if(d=I[a],d.series.bars.show)wa(d.series,d.point);else{var b=d.series,
c=d.point;d=c[0];var c=c[1],e=b.xaxis,f=b.yaxis;if(!(d<e.min||d>e.max||c<f.min||c>f.max)){var g=b.points.radius+b.points.lineWidth/2;A.lineWidth=g;A.strokeStyle=i.color.parse(b.color).scale("a",0.5).toString();g*=1.5;d=e.p2c(d);c=f.p2c(c);A.beginPath();"circle"==b.points.symbol?A.arc(d,c,g,0,2*Math.PI,!1):b.points.symbol(A,d,c,g,!1);A.closePath();A.stroke()}}A.restore();o(z.drawOverlay,[A])}function ka(a,d,b){"number"==typeof a&&(a=v[a]);if("number"==typeof d)var c=a.datapoints.pointsize,d=a.datapoints.points.slice(c*
d,c*(d+1));c=ma(a,d);-1==c?(I.push({series:a,point:d,auto:b}),T()):b||(I[c].auto=!1)}function ja(a,d){null==a&&null==d&&(I=[],T());"number"==typeof a&&(a=v[a]);"number"==typeof d&&(d=a.data[d]);var b=ma(a,d);-1!=b&&(I.splice(b,1),T())}function ma(a,d){for(var b=0;b<I.length;++b){var c=I[b];if(c.series==a&&c.point[0]==d[0]&&c.point[1]==d[1])return b}return-1}function wa(a,d){A.lineWidth=a.bars.lineWidth;A.strokeStyle=i.color.parse(a.color).scale("a",0.5).toString();var b=i.color.parse(a.color).scale("a",
0.5).toString(),c="left"==a.bars.align?0:-a.bars.barWidth/2;fa(d[0],d[1],d[2]||0,c,c+a.bars.barWidth,0,function(){return b},a.xaxis,a.yaxis,A,a.bars.horizontal,a.bars.lineWidth)}function ba(a,d,b,c){if("string"==typeof a)return a;for(var d=g.createLinearGradient(0,b,0,d),b=0,e=a.colors.length;b<e;++b){var f=a.colors[b];if("string"!=typeof f){var h=i.color.parse(c);null!=f.brightness&&(h=h.scale("rgb",f.brightness));null!=f.opacity&&(h.a*=f.opacity);f=h.toString()}d.addColorStop(b/(e-1),f)}return d}
var v=[],f={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{show:null,position:"bottom",mode:null,timezone:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,
tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,
margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},N=null,O=null,G=null,g=null,A=null,B=[],D=[],h={left:0,right:0,top:0,bottom:0},E=0,F=0,J=0,H=0,z={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},
t=this;t.setData=L;t.setupGrid=$;t.draw=aa;t.getPlaceholder=function(){return j};t.getCanvas=function(){return N};t.getPlotOffset=function(){return h};t.width=function(){return J};t.height=function(){return H};t.offset=function(){var a=G.offset();a.left+=h.left;a.top+=h.top;return a};t.getData=function(){return v};t.getAxes=function(){var a={};i.each(B.concat(D),function(d,b){b&&(a[b.direction+(1!=b.n?b.n:"")+"axis"]=b)});return a};t.getXAxes=function(){return B};t.getYAxes=function(){return D};t.c2p=
W;t.p2c=function(a){var d={},b,c,e;for(b=0;b<B.length;++b)if((c=B[b])&&c.used)if(e="x"+c.n,null==a[e]&&1==c.n&&(e="x"),null!=a[e]){d.left=c.p2c(a[e]);break}for(b=0;b<D.length;++b)if((c=D[b])&&c.used)if(e="y"+c.n,null==a[e]&&1==c.n&&(e="y"),null!=a[e]){d.top=c.p2c(a[e]);break}return d};t.getOptions=function(){return f};t.highlight=ka;t.unhighlight=ja;t.triggerRedrawOverlay=T;t.pointOffset=function(a){return{left:parseInt(B[R(a,"x")-1].p2c(+a.x)+h.left),top:parseInt(D[R(a,"y")-1].p2c(+a.y)+h.top)}};
t.shutdown=function(){Q&&clearTimeout(Q);G.unbind("mousemove",ga);G.unbind("mouseleave",ha);G.unbind("click",ia);o(z.shutdown,[G])};t.resize=function(){Y();Z(N);Z(O)};t.hooks=z;(function(){for(var a=0;a<P.length;++a){var d=P[a];d.init(t);d.options&&i.extend(!0,f,d.options)}})(t);(function(a){i.extend(!0,f,a);null==f.xaxis.color&&(f.xaxis.color=f.grid.color);null==f.yaxis.color&&(f.yaxis.color=f.grid.color);null==f.xaxis.tickColor&&(f.xaxis.tickColor=f.grid.tickColor);null==f.yaxis.tickColor&&(f.yaxis.tickColor=
f.grid.tickColor);null==f.grid.borderColor&&(f.grid.borderColor=f.grid.color);null==f.grid.tickColor&&(f.grid.tickColor=i.color.parse(f.grid.color).scale("a",0.22).toString());for(a=0;a<Math.max(1,f.xaxes.length);++a)f.xaxes[a]=i.extend(!0,{},f.xaxis,f.xaxes[a]);for(a=0;a<Math.max(1,f.yaxes.length);++a)f.yaxes[a]=i.extend(!0,{},f.yaxis,f.yaxes[a]);f.xaxis.noTicks&&null==f.xaxis.ticks&&(f.xaxis.ticks=f.xaxis.noTicks);f.yaxis.noTicks&&null==f.yaxis.ticks&&(f.yaxis.ticks=f.yaxis.noTicks);f.x2axis&&(f.xaxes[1]=
i.extend(!0,{},f.xaxis,f.x2axis),f.xaxes[1].position="top");f.y2axis&&(f.yaxes[1]=i.extend(!0,{},f.yaxis,f.y2axis),f.yaxes[1].position="right");f.grid.coloredAreas&&(f.grid.markings=f.grid.coloredAreas);f.grid.coloredAreasColor&&(f.grid.markingsColor=f.grid.coloredAreasColor);f.lines&&i.extend(!0,f.series.lines,f.lines);f.points&&i.extend(!0,f.series.points,f.points);f.bars&&i.extend(!0,f.series.bars,f.bars);null!=f.shadowSize&&(f.series.shadowSize=f.shadowSize);for(a=0;a<f.xaxes.length;++a)S(B,a+
1).options=f.xaxes[a];for(a=0;a<f.yaxes.length;++a)S(D,a+1).options=f.yaxes[a];for(var d in z)f.hooks[d]&&f.hooks[d].length&&(z[d]=z[d].concat(f.hooks[d]));o(z.processOptions,[f])})(y);(function(){var a;a=j.children("canvas.flot-base");var d=j.children("canvas.flot-overlay");0==a.length||0==d?(j.html(""),j.css({padding:0}),"static"==j.css("position")&&j.css("position","relative"),Y(),N=X(!0,"flot-base"),O=X(!1,"flot-overlay"),a=!1):(N=a.get(0),O=d.get(0),a=!0);g=N.getContext("2d");A=O.getContext("2d");
G=i(O);a&&(j.data("plot").shutdown(),t.resize(),A.clearRect(0,0,E,F),G.unbind(),j.children().not([N,O]).remove());j.data("plot",t)})();L(k);$();aa();f.grid.hoverable&&(G.mousemove(ga),G.mouseleave(ha));f.grid.clickable&&G.click(ia);o(z.bindEvents,[G]);var I=[],Q=null}i.plot=function(j,k,y){return new L(i(j),k,y,i.plot.plugins)};i.plot.version="0.7";i.plot.plugins=[]})(jQuery);

/* - ++resource++collective.polls/js/jquery.flot.pie.js - */
(function(s){var c={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,offset:{top:0,left:"auto"},stroke:{color:"#FFF",width:1},label:{show:"auto",formatter:function(c,s){return'<div style="font-size:x-small;text-align:center;padding:2px;color:'+s.color+';">'+c+"<br/>"+Math.round(s.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};s.plot.plugins.push({init:function(r){function F(a){A||
(A=!0,l=a.getCanvas(),t=s(l).parent(),c=a.getOptions(),a.setData(G(a.getData())))}function G(a){for(var b=0;b<a.length;++b)if("number"==typeof a[b].data)a[b].data=[[1,a[b].data]];else if("undefined"==typeof a[b].data||"undefined"==typeof a[b].data[0])"undefined"!=typeof a[b].data&&"undefined"!=typeof a[b].data.label&&(a[b].label=a[b].data.label),a[b].data=[[1,0]];for(var b=a,j=0;j<b.length;++j){var g=parseFloat(b[j].data[0][1]);g&&(n+=g)}for(var j=b=0,g=c.series.pie.combine.color,f=[],d=0;d<a.length;++d)a[d].data[0][1]=
parseFloat(a[d].data[0][1]),a[d].data[0][1]||(a[d].data[0][1]=0),a[d].data[0][1]/n<=c.series.pie.combine.threshold?(b+=a[d].data[0][1],j++,g||(g=a[d].color)):f.push({data:[[1,a[d].data[0][1]]],color:a[d].color,label:a[d].label,angle:a[d].data[0][1]*2*Math.PI/n,percent:100*(a[d].data[0][1]/n)});0<j&&f.push({data:[[1,b]],color:g,label:c.series.pie.combine.label,angle:b*2*Math.PI/n,percent:100*(b/n)});return f}function H(a,b){function j(){ctx.clearRect(0,0,l.width,l.height);t.children().filter(".pieLabel, .pieLabelBackground").remove()}
function g(){var a=1<c.series.pie.radius?c.series.pie.radius:o*c.series.pie.radius;if(!(a>=l.width/2-5||a*c.series.pie.tilt>=l.height/2-15||10>=a)){ctx.save();ctx.translate(5,15);ctx.globalAlpha=0.02;ctx.fillStyle="#000";ctx.translate(m,v);ctx.scale(1,c.series.pie.tilt);for(var b=1;10>=b;b++)ctx.beginPath(),ctx.arc(0,0,a,0,2*Math.PI,!1),ctx.fill(),a-=b;ctx.restore()}}function f(){function a(b,c,d){0>=b||isNaN(b)||(d?ctx.fillStyle=c:(ctx.strokeStyle=c,ctx.lineJoin="round"),ctx.beginPath(),1.0E-9<Math.abs(b-
2*Math.PI)?ctx.moveTo(0,0):s.browser.msie&&(b-=1.0E-4),ctx.arc(0,0,f,g,g+b,!1),ctx.closePath(),g+=b,d?ctx.fill():ctx.stroke())}function b(){for(var a=j,f=1<c.series.pie.label.radius?c.series.pie.label.radius:o*c.series.pie.label.radius,g=0;g<d.length;++g){if(d[g].percent>=100*c.series.pie.label.threshold){var e=d[g],h=a,q=g;if(0!=e.data[0][1]){var p=c.legend.labelFormatter,k=void 0,r=c.series.pie.label.formatter,k=p?p(e.label,e):e.label;r&&(k=r(k,e));p=(h+e.angle+h)/2;h=m+Math.round(Math.cos(p)*f);
p=v+Math.round(Math.sin(p)*f)*c.series.pie.tilt;t.append('<span class="pieLabel" id="pieLabel'+q+'" style="position:absolute;top:'+p+"px;left:"+h+'px;">'+k+"</span>");q=t.children("#pieLabel"+q);k=p-q.height()/2;p=h-q.width()/2;q.css("top",k);q.css("left",p);if(0<0-k||0<0-p||0>l.height-(k+q.height())||0>l.width-(p+q.width()))w=!0;0!=c.series.pie.label.background.opacity&&(h=c.series.pie.label.background.color,null==h&&(h=e.color),e="top:"+k+"px;left:"+p+"px;",s('<div class="pieLabelBackground" style="position:absolute;width:'+
q.width()+"px;height:"+q.height()+"px;"+e+"background-color:"+h+';"> </div>').insertBefore(q).css("opacity",c.series.pie.label.background.opacity))}}a+=d[g].angle}}var j=Math.PI*c.series.pie.startAngle,f;f=1<c.series.pie.radius?c.series.pie.radius:o*c.series.pie.radius;ctx.save();ctx.translate(m,v);ctx.scale(1,c.series.pie.tilt);ctx.save();for(var g=j,h=0;h<d.length;++h)d[h].startAngle=g,a(d[h].angle,d[h].color,!0);ctx.restore();if(0<c.series.pie.stroke.width){ctx.save();ctx.lineWidth=c.series.pie.stroke.width;
g=j;for(h=0;h<d.length;++h)a(d[h].angle,c.series.pie.stroke.color,!1);ctx.restore()}B(ctx);c.series.pie.label.show&&b();ctx.restore()}if(t){ctx=b;z=t.children().filter(".legend").children().width();o=Math.min(l.width,l.height/c.series.pie.tilt)/2;v=l.height/2+c.series.pie.offset.top;m=l.width/2;m="auto"==c.series.pie.offset.left?c.legend.position.match("w")?m+z/2:m-z/2:m+c.series.pie.offset.left;m<o?m=o:m>l.width-o&&(m=l.width-o);for(var d=a.getData(),h=0;w&&h<C;)w=!1,0<h&&(o*=I),h+=1,j(),0.8>=c.series.pie.tilt&&
g(),f();h>=C&&(j(),t.prepend('<div class="error">Could not draw pie with labels contained inside canvas</div>'));a.setSeries&&a.insertLegend&&(a.setSeries(d),a.insertLegend())}}function B(a){0<c.series.pie.innerRadius&&(a.save(),innerRadius=1<c.series.pie.innerRadius?c.series.pie.innerRadius:o*c.series.pie.innerRadius,a.globalCompositeOperation="destination-out",a.beginPath(),a.fillStyle=c.series.pie.stroke.color,a.arc(0,0,innerRadius,0,2*Math.PI,!1),a.fill(),a.closePath(),a.restore(),a.save(),a.beginPath(),
a.strokeStyle=c.series.pie.stroke.color,a.arc(0,0,innerRadius,0,2*Math.PI,!1),a.stroke(),a.closePath(),a.restore())}function J(a){D("plothover",a)}function K(a){D("plotclick",a)}function D(a,b){var j=r.offset(),g=parseInt(b.pageX-j.left);a:{for(var j=parseInt(b.pageY-j.top),f=r.getData(),d=r.getOptions(),d=1<d.series.pie.radius?d.series.pie.radius:o*d.series.pie.radius,h=0;h<f.length;++h){var e=f[h];if(e.pie.show){ctx.save();ctx.beginPath();ctx.moveTo(0,0);ctx.arc(0,0,d,e.startAngle,e.startAngle+
e.angle,!1);ctx.closePath();x=g-m;y=j-v;if(ctx.isPointInPath){if(ctx.isPointInPath(g-m,j-v)){ctx.restore();g={datapoint:[e.percent,e.data],dataIndex:0,series:e,seriesIndex:h};break a}}else{p1X=d*Math.cos(e.startAngle);p1Y=d*Math.sin(e.startAngle);p2X=d*Math.cos(e.startAngle+e.angle/4);p2Y=d*Math.sin(e.startAngle+e.angle/4);p3X=d*Math.cos(e.startAngle+e.angle/2);p3Y=d*Math.sin(e.startAngle+e.angle/2);p4X=d*Math.cos(e.startAngle+e.angle/1.5);p4Y=d*Math.sin(e.startAngle+e.angle/1.5);p5X=d*Math.cos(e.startAngle+
e.angle);p5Y=d*Math.sin(e.startAngle+e.angle);arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]];arrPoint=[x,y];for(var l=!1,u=-1,s=arrPoly.length,n=s-1;++u<s;n=u)(arrPoly[u][1]<=arrPoint[1]&&arrPoint[1]<arrPoly[n][1]||arrPoly[n][1]<=arrPoint[1]&&arrPoint[1]<arrPoly[u][1])&&arrPoint[0]<(arrPoly[n][0]-arrPoly[u][0])*(arrPoint[1]-arrPoly[u][1])/(arrPoly[n][1]-arrPoly[u][1])+arrPoly[u][0]&&(l=!l);if(l){ctx.restore();g={datapoint:[e.percent,e.data],dataIndex:0,series:e,seriesIndex:h};break a}}ctx.restore()}}g=
null}if(c.grid.autoHighlight)for(j=0;j<k.length;++j)if(f=k[j],f.auto==a&&!(g&&f.series==g.series)&&(f=f.series,null==f&&(k=[],r.triggerRedrawOverlay()),"number"==typeof f&&(f=series[f]),f=E(f),-1!=f))k.splice(f,1),r.triggerRedrawOverlay();g&&(j=g.series,"number"==typeof j&&(j=series[j]),f=E(j),-1==f?(k.push({series:j,auto:a}),r.triggerRedrawOverlay()):a||(k[f].auto=!1));t.trigger(a,[{pageX:b.pageX,pageY:b.pageY},g])}function E(a){for(var b=0;b<k.length;++b)if(k[b].series==a)return b;return-1}function L(a,
b){var c=a.getOptions(),g=1<c.series.pie.radius?c.series.pie.radius:o*c.series.pie.radius;b.save();b.translate(m,v);b.scale(1,c.series.pie.tilt);for(i=0;i<k.length;++i){var f=k[i].series;0>=f.angle||isNaN(f.angle)||(b.fillStyle="rgba(255, 255, 255, "+c.series.pie.highlight.opacity+")",b.beginPath(),1.0E-9<Math.abs(f.angle-2*Math.PI)&&b.moveTo(0,0),b.arc(0,0,g,f.startAngle,f.startAngle+f.angle,!1),b.closePath(),b.fill())}B(b);b.restore()}var l=null,t=null,o=null,m=null,v=null,n=0,w=!0,C=10,I=0.95,
z=0,A=!1,k=[];r.hooks.processOptions.push(function(a,b){b.series.pie.show&&(b.grid.show=!1,"auto"==b.series.pie.label.show&&(b.series.pie.label.show=b.legend.show?!1:!0),"auto"==b.series.pie.radius&&(b.series.pie.radius=b.series.pie.label.show?0.75:1),1<b.series.pie.tilt&&(b.series.pie.tilt=1),0>b.series.pie.tilt&&(b.series.pie.tilt=0),a.hooks.processDatapoints.push(F),a.hooks.drawOverlay.push(L),a.hooks.draw.push(H))});r.hooks.bindEvents.push(function(a,b){var c=a.getOptions();c.series.pie.show&&
c.grid.hoverable&&b.unbind("mousemove").mousemove(J);c.series.pie.show&&c.grid.clickable&&b.unbind("click").click(K)})},options:c,name:"pie",version:"1.0"})})(jQuery);
